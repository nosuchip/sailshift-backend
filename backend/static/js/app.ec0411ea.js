(function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"07d4":function(t,e,n){},"271d":function(t,e,n){},"29e6":function(t,e,n){},"31b7":function(t,e,n){},"3add":function(t,e,n){"use strict";var r=n("31b7"),a=n.n(r);a.a},"4ffd":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABACAYAAABFqxrgAAAABHNCSVQICAgIfAhkiAAAA9FJREFUeF7tWs1LG0EUf/n+EENQsVK8pNReBC1CLiKCBwURQ/TgQejVgqL/gdCbR71ZvEUQighBRDwUIQfxIlhBBC9S6EG9VIKV1JiP7Txt0p2dWZNZm9bVt7CweW/ec+Y37zfr/HYcAKCx+1lfzmc9+t+DJxAYEG67VsLU1BTE43Hwer1KQ0ilUjA3NwfX19dcHK4JtrpjsZj2kGt2dpYbry3pMDAwoDT7xsbt7e2cyZYgGAel+tvhcBAIRtCeZSUQCEYE2G+qBALhriyoEqgSqBLKSyTRgehgYzpcXl6WS9nKQ7FY5MJsSYe1tTW4urqyMn4oFAqwsbHBxeJOwpbyWldXF3R3d4PTWf08su037O/vw+7uLuBz6bItCJbKwCSoehhNEjwFM4HAZrHmGiMKGCMjIzA8PAxud/V/Djm7vb0NiURCWmyYc2hoCHw+n9RvZsT1YHFxUXDXVF9kg9ey2axlSXBsbEzoX29vr+V8GDg5OflvNcaenh5lRVg/TePj48KsjY6OCjYVAwORa/7o1wSXyyWMT4VWQjAzkMYoQeXRV4Kkz3/dRCAwSAkEAuGOWVQJVAlUCeW3DNGB6GATOrDNV7lsSw8ym9DoHoNeVcJmNacDHo9BXc/qtbKyIoQmk0m4ubkR7NUadnZ2uKY1l9dws9LX1weDg4PKeuDe3h6srq5yeiD2HnP29/ff3ioaI8YeHh7eahSkMRpKpuZ0qLZE/2c7AoGhLxX9ULTweDxKk5PL5SCfz0tjkMN+v1/qu8+IZw2NK7m+PeY0CiT35UMfvlmMX6DQzult09PTGhuMsobHPo1pMzMzgh7Y3Nysra+vK+fDgOPjYy0cDgs5Q2639qk1on1vfa18p1pfaS8DQS4nalcfSuiFQiHY3Ny0NGuo+nZ0dMDS0hL3+pqYmAAGTqUJkvqbmpqgrq4Otra2OP+7cCO89wSkMZWML8ABPpcTPmf+fMbj1oS2tjaor6+vlMfUz2YNAgG+cy0tLabtq3FEIhGh2RunlMVCOzNDo4c/CkwLI0OKQCAQ7ghDlUCVQJVQfnkQHYgORAeiQxkBooOEDqenp3qAlJ9xO423/spkMsp59AEnJydC/FfgD2MKDSoYfhZ5zZN7O5ydncHCwoJlYXR+fh7S6TTXheXlZTg6OqrQLbn7/Pxcer4omb6AbxaBuHA64OMPvo+C0IoiRWdnJzQ0NMh7ZmLFKmL7f6k3GAxCNBoF2akTaQAzopp8cHBgenLVx4Sft14/eHWHMs1ylexYP19yWcgYxB8BhEqJnqKf/llis0ogMBB+ASWBkTTfhPTnAAAAAElFTkSuQmCC"},7346:function(t,e,n){"use strict";var r=n("271d"),a=n.n(r);a.a},"73c7":function(t,e,n){"use strict";var r=n("29e6"),a=n.n(r);a.a},"7c82":function(t,e,n){"use strict";var r=n("98ec"),a=n.n(r);a.a},"8f4c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAAAAXNSR0IArs4c6QAAAK9JREFUSA1j3LjviPrtOw/3f/v+Q5KBjoCLk+O5qoq8I7OJtfNlelsO8ufvP394P3/+GswCs7w4PY6O/mdg6J25iAFkNxNdbcVi2agDRkOApX7GIwYWVjaGvY9fYkkitBM6tPUR2PDRKBgNgdEQGPAQYFwuwPAflCGtZSRol+mxmHz0yQuw6ICHwKgDRkMAlAsuA5OjDpaESg+h80z/fzO4MDIyXKOHbWh2nAfa7QkAi+Qyh6bRqT0AAAAASUVORK5CYII="},"98ec":function(t,e,n){},"98f5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAAAAXNSR0IArs4c6QAABURJREFUSA3NVgtMFEcY/nZvkZO7E6j4OOypiFBNfCSKnNhqYxpjImpKT7TV2moxbWzri2qsMRRLBWOrNoCPGMVaa7WIJhqlitCXDVUM1sZSsURFLfaOhz04jrvjbnenO3Pu9ogPQprYTjI7//zzP2b+2fm/n5uDlJwxuLLeiA4eSnPnF9EBxXuA32paGB36ycmPYVPjioxQtqb3wYp/dCIiBLy/KaqLnKrnhkG+gjG5fKjzUMmz5XNhsZhCWT2idToOhw7PfqQOPTD1zW0DCJVaPHEUuP4DYcjKhZCUzBSdrSLmzbsJV5ukGSovT4TJpEPjyJGQ29oYn4+MxIDaWrS3S5g2rY7xCgotmJBkAMdxkJub4NmYBfHiT5qdzy7UBHVVjiwTSA47XO9mwFOwBcTvR3SUgKMl8Rg7trcq1u2o1/PYv38okicYmXP/d+Vom58G/4VKUB8ypwOfvlCzw+XkF7EIrCCt8BcfAAJ+tigkPANjzmYIwxMhSQTHjjmxbVsjHhcBr1eG0ykiNrYXSIcb7i156Dx1XHOms05G+PK14AcPVTYj4cSJ6xDU1V5vrYQw0wZf4ccQz30D/7VaOBemw/DOKkQseB02WzRiYgTwPKeqaCNnNDKanp46D/xyCa6stZDuNjA+PyQOesWxkDKFzS9f9mDTpjKcPHmDzjeT6dOPkMrKduL1Sqy3//AjaUybQexjE1i/9+ZrRHTYSSAgEyWMrDlGjCB/ms2sNyYnB5nKoit/C7GPG8H0HM+OI61Fe4nX5WN26+t9pLCwkVitV5Wob2adPb2ysnpkZv6BXbua0dAQgJA8CX2+OA595noQgwne85VosqUiUFGq3Cs7xEM/UkszXHt3QRYlhM2ywXTkDMLnLwbCwlBa2oaMjFs4ePBeF13tH8ha/kaXhe4moa9AZ7Ggf1VVdypd1j8q2MfmLAJdVp7wRMsDL5vNT9T1V3b7/yMC//kVaHmAptOeNNnlUpI4y2FQkgN4Uw9x4/4VCCr6Dfg3r2DQoB6/Avf9V6BFgAIJbYLAITycD753IoN4PCBK2uR6hYPX6x8bJCIGIHu8TIbvreCHEMZoUSTw+eSH6goqfpceqsOaNQORmhoJv19Ge1kp7KuXgRod/Ol2RL+YxgzQoD8qF3GKw0DzbdQvehW+ujo8tWQp+q/LBicIqK72YOtWB1paRGanqipYN7Cf0Gw2KLn5aeZcybdwbFiHO0sWgo+MQsKpMuacXvftOz54Oh5+EvV4+vjhSDxdgT4zUtGyezvqbTMQUDAhJcWAHTuGKGMQN1R5UDSkneKA6/pt8uvU50lVtJFcS08jAaeT5XhRksnXZ5xkypRa4nKJD2LB+PGM19omEl+nxGhZwYW7Wz8hF2P6kEtxFtJ06rSGNSUlfzEcoHigPUPX2dP4/YVJcP9cDfOq95B4uARCVBQ6A7ISHTs+zLajs/P+X69tP0iQjg5GUKBcvOgWaCFDC5HYzNVIOHxUgV4ZNxbMgX1jtnKlEmbOjERx8Wz06xcBLRNaTb2hMxowfHcR+s4KllLKifD20ju4ebNTc/m4ekCtiCIieOTmxcJqNYJXNuK7VY9rr8yFp6YGRmsK4vYcwN5hluCmVcvh8fEY/e055lyJIS5Wu/FS2o0uzlXZ7kaPR8aqlQ3YubMJoihDPzQOoyu+R19bOlwKsl6dOlEzweXAIKkVMeUuC0jI3lCJvNzzmlAo0ZOqmOolJQ1EecU8FH7+JTOjVsV04oZJ4mlp3KGUyGxV+Tw3+dAjnasyPRmrqx0YFrf7ARXq/ApG5f0NP6GR+RiBCV0AAAAASUVORK5CYII="},"9cb3":function(t,e,n){},a20a:function(t,e,n){"use strict";var r=n("9cb3"),a=n.n(r);a.a},aaf5:function(t,e,n){"use strict";var r=n("abf6"),a=n.n(r);a.a},abf6:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),a=n("bc3a"),o=n.n(a),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view"),t.notification?n("v-snackbar",{attrs:{top:"","multi-line":"",color:t.color},model:{value:t.notification,callback:function(e){t.notification=e},expression:"notification"}},[t._v(" "+t._s(t.notification.message)+" "),n("v-btn",{attrs:{color:t.notification.type,text:""},on:{click:function(e){return t.setNotification(null)}}},[t._v("Close")])],1):t._e(),n("loader"),n("app-footer")],1)},s=[],c=n("9ab4"),u=n("2fe1"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{color:"indigo",app:""}},[n("span",{staticClass:"white--text"},[t._v("Â© 2019")]),n("v-spacer"),n("div",[n("v-btn",{attrs:{color:"white",small:"",text:"",rounded:"",to:{name:"home"}}},[t._v(" Home ")]),n("v-btn",{attrs:{color:"white",small:"",text:"",rounded:"",to:{name:"privacy_policy"}}},[t._v(" Privacy policy ")]),n("v-btn",{attrs:{color:"white",small:"",text:"",rounded:"",to:{name:"contact"}}},[t._v(" Contact us ")])],1)],1)},d=[],p=r["a"].extend({name:"Footer"}),m=p,f=n("2877"),h=n("6544"),v=n.n(h),b=n("8336"),g=n("553a"),y=n("2fa4"),_=Object(f["a"])(m,l,d,!1,null,null,null),C=_.exports;v()(_,{VBtn:b["a"],VFooter:g["a"],VSpacer:y["a"]});var O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-overlay",{attrs:{value:t.loading,"z-index":"999"}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},A=[],w=n("2f62"),D=r["a"].extend({computed:Object(w["e"])({loading:"loading"})}),x=D,T=n("a797"),E=n("490a"),S=Object(f["a"])(x,O,A,!1,null,null,null),N=S.exports;v()(S,{VOverlay:T["a"],VProgressCircular:E["a"]});var U,P,k=n("4bb5"),I=n("60a3"),j=n("0e44"),V=void 0,R=o.a.create({baseURL:Object({VUE_APP_STRIPE_API_PUBLISHABLE_KEY:"pk_test_hNvUnzfcexW7qmN3MEruc1z500r9xWacbZ",NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_BASE_URL||""}),M=function(){delete R.defaults.headers.common.Authorization},L=function(t){if(!t)return M();R.defaults.headers.common.Authorization="Bearer "+t},F=function(t,e){return R.post("/api/accounts/login",{email:t,password:e})},q=function(t,e,n){return R.post("/api/accounts/contact",{email:t,subject:e,message:n})},B=function(t){return R.post("/api/accounts/forgot_password",{email:t})},H=function(t,e,n){return R.post("/api/accounts/register",{email:t,password:e,confirmation:n})},z=function(t,e,n){return c["b"](V,void 0,void 0,(function(){return c["e"](this,(function(r){return[2,R.post("/api/accounts/reset_password",{token:t,password:e,confirmation:n})]}))}))},G=function(t){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,R.get("/api/documents/",{params:t})]}))}))},Y=function(){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(t){return[2,R.get("/api/documents/my")]}))}))},W=function(t,e){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(n){return[2,R.post("/api/documents/search",c["a"]({},e,t))]}))}))},K=function(t){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,R.get("/api/accounts/users",{params:t})]}))}))},J=function(t){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,R.get("/api/purchases/",{params:t})]}))}))},Q=function(){return c["b"](V,void 0,void 0,(function(){return c["e"](this,(function(t){return[2,R.get("/api/documents/popular")]}))}))},$=function(t){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,R.get("/api/documents/"+t)]}))}))},Z=function(t){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,R.post("/api/payments/prepay",t)]}))}))},X=function(t){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,R.get("/api/payments/check/"+t)]}))}))},tt=function(t,e,n,r,a){return c["b"](V,void 0,void 0,(function(){var o;return c["e"](this,(function(i){return o=new FormData,o.append("title",t),o.append("organization",e),o.append("department",n),r&&o.append("description",r),o.append("file",a),[2,R.post("/api/documents/admin/upload",o,{headers:{"Content-Type":"multipart/form-data"}})]}))}))},et=function(t){return c["b"](V,void 0,void 0,(function(){return c["e"](this,(function(e){return[2,R.delete("/api/documents/admin/"+t)]}))}))},nt=function(t){return c["b"](V,void 0,void 0,(function(){return c["e"](this,(function(e){return[2,R.put("/api/documents/admin/"+t.id,t)]}))}))},rt=function(t){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,R.delete("/api/accounts/"+t)]}))}))},at=function(t){return c["b"](V,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,R.put("/api/accounts/"+t.id,t)]}))}))},ot={NOTIFICATION:"notification",CONTACT:"contact",LOGIN:"login",FORGOT_PASSWORD:"forgot_password",REGISTER:"register",RESET_PASSWORD:"reset_password",LOAD_DOCUMENTS:"LOAD_DOCUMENTS",LOAD_DOCUMENT:"LOAD_DOCUMENT",SEARCH_DOCUMENTS:"SEARCH_DOCUMENTS",ADMIN_CREATE_DOCUMENT:"ADMIN_CREATE_DOCUMENT",ADMIN_UPDATE_DOCUMENT:"ADMIN_UPDATE_DOCUMENT",ADMIN_DELETE_DOCUMENT:"ADMIN_DELETE_DOCUMENT",ADMIN_LOAD_USERS:"ADMIN_LOAD_USERS",ADMIN_UPDATE_USER:"ADMIN_UPDATE_USER",ADMIN_DELETE_USER:"ADMIN_DELETE_USER",ADMIN_LOAD_PURCHASES:"ADMIN_LOAD_PURCHASES",DOCUMENTS_LOAD_POPULAR:"DOCUMENTS_LOAD_POPULAR",PRE_PURCHASE_DOCUMENT:"PRE_PURCHASE_DOCUMENT",CHECK_PURCHASE_DOCUMENT:"CHECK_PURCHASE_DOCUMENT",GET_USER_DOCUMENTS:"GET_USER_DOCUMENTS"},it={LOADING:"LOADING",NOTIFICATION:"NOTIFICATION",LOGIN:"LOGIN",LOGOUT:"LOGOUT",USER:"USER",TOKEN:"TOKEN",DOCUMENTS:"DOCUMENTS",CURRENT_DOCUMENT:"CURRENT_DOCUMENT",POPULAR_DOCUMENTS:"POPULAR_DOCUMENTS",PURCHASES:"PURCHASES",CURRENT_PURCHASE:"CURRENT_PURCHASE",USERS:"USERS"},st={fromBackend:function(t){return{id:t.id,email:t.email,name:t.name,activatedAt:t.activated_at,active:!!t.active,role:t.role}},toBackend:function(t){var e={id:t.id,email:t.email,name:t.name,activated_at:t.activatedAt,active:!!t.active,role:t.role};return t.password&&(e.password=t.password),t.confirmation&&(e.confirmation=t.confirmation),e}},ct={fromBackend:function(t){return{id:t.id,purchasedAt:t.purchased_at,validUntil:t.valid_until,downloadUrl:t.download_url,documentId:t.document_id,userId:t.user_id,paymentStatus:t.payment_status}},toBackend:function(t){return{id:t.id,purchased_at:t.purchasedAt,valid_until:t.validUntil,download_url:t.downloadUrl,document_id:t.documentId,user_id:t.userId,payment_status:t.paymentStatus}}},ut={fromBackend:function(t){return{documentId:t.document_id,amount:t.amount,currency:t.currency,paymentMethod:t.payment_method}},toBackend:function(t){return{document_id:t.documentId,amount:t.amount,currency:t.currency,payment_method:t.paymentMethod}}},lt=void 0,dt=function(t,e){var n=t.commit;n(it.NOTIFICATION,e)},pt=function(t,e){t.commit;var n=t.dispatch,r=e.email,a=e.subject,o=e.message;return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:console.log("Sending contact message"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,q(r,a,o)];case 2:return e.sent(),n(ot.NOTIFICATION,{message:"Thank you for your message",type:"success"}),[3,4];case 3:return t=e.sent(),console.error(">> err",t),n(ot.NOTIFICATION,{message:"Unable to send message.",type:"error"}),[3,4];case 4:return[2]}}))}))},mt=function(t,e){var n=t.commit,r=t.dispatch,a=e.email,o=e.password;return c["b"](lt,void 0,void 0,(function(){var t,e,i,s;return c["e"](this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,F(a,o)];case 1:if(t=c.sent().data,e=t.user,i=t.token,!e||!i)throw new Error("User or token missing");return L(i),n(it.LOGIN,{user:st.fromBackend(e),token:i}),[2,e];case 2:return s=c.sent(),console.error(">> err",s),r(ot.NOTIFICATION,{message:"Incorrect username or password",type:"error"}),[3,3];case 3:return[2,null]}}))}))},ft=function(t,e){var n=t.dispatch,r=e.email;return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,B(r)];case 1:return e.sent(),n(ot.NOTIFICATION,{message:"Email with password restore link sent to your email",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(ot.NOTIFICATION,{message:"Unable to send reset password instructions to desired email.",type:"error"}),[3,3];case 3:return[2]}}))}))},ht=function(t,e){var n=t.dispatch,r=e.email,a=e.password,o=e.confirmation;return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,H(r,a,o)];case 1:return e.sent(),n(ot.NOTIFICATION,{message:"Your account created successfully. Please check your email for confirmation letter.",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(ot.NOTIFICATION,{message:"Unable to create account with such email or password.",type:"error"}),[3,3];case 3:return[2]}}))}))},vt=function(t,e){var n=t.dispatch,r=e.token,a=e.password,o=e.confirmation;return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,z(r,a,o)];case 1:return e.sent(),n(ot.NOTIFICATION,{message:"New password was set. Please login now",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(ot.NOTIFICATION,{message:"Unable to set new password.",type:"error"}),[3,3];case 3:return[2]}}))}))},bt=function(t,e){var n=t.dispatch,r=t.commit;return c["b"](lt,void 0,void 0,(function(){var t,a;return c["e"](this,(function(o){switch(o.label){case 0:e=e||{page:0},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,G(e)];case 2:return t=o.sent().data,r(it.DOCUMENTS,{documents:t.data}),[2,t];case 3:return a=o.sent(),console.error(">> err",a),r(it.DOCUMENTS,{documents:[]}),n(ot.NOTIFICATION,{message:"Unable to load documents.",type:"error"}),[3,4];case 4:return[2]}}))}))},gt=function(t,e,n){var r=t.dispatch,a=t.commit;return c["b"](lt,void 0,void 0,(function(){var t,o;return c["e"](this,(function(i){switch(i.label){case 0:n=n||{page:0},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,W(e,n)];case 2:return t=i.sent().data,a(it.DOCUMENTS,{documents:t.data}),[2,t];case 3:return o=i.sent(),console.error(">> err",o),a(it.DOCUMENTS,{documents:[]}),r(ot.NOTIFICATION,{message:"Unable to load documents.",type:"error"}),[3,4];case 4:return[2]}}))}))},yt=function(t){var e=t.commit,n=t.dispatch;return c["b"](lt,void 0,void 0,(function(){var t,r;return c["e"](this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Q()];case 1:return t=a.sent().data,e(it.POPULAR_DOCUMENTS,{documents:t.data}),[3,3];case 2:return r=a.sent(),console.error(">> err",r),e(it.POPULAR_DOCUMENTS,{documents:[]}),n(ot.NOTIFICATION,{message:"Unable to load most popular documents.",type:"error"}),[3,3];case 3:return[2]}}))}))},_t=function(t,e){var n=t.commit,r=t.dispatch;return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,$(e)];case 1:return t=a.sent().data,n(it.CURRENT_DOCUMENT,{document:t.document}),[2,t.document];case 2:return a.sent(),n(it.CURRENT_DOCUMENT,{document:null}),r(ot.NOTIFICATION,{message:"Unable to load document.",type:"error"}),[3,3];case 3:return[2,null]}}))}))},Ct=function(t,e){return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(n){switch(n.label){case 0:return[4,Z(ut.toBackend(e))];case 1:return t=n.sent().data,[2,{clientSecret:t.client_secret}]}}))}))},Ot=function(t,e){return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(n){switch(n.label){case 0:return[4,X(e)];case 1:return t=n.sent().data.purchase,[2,{purchase:ct.fromBackend(t)}]}}))}))},At=function(t){return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return[4,Y()];case 1:return t=e.sent().data,[2,t.data]}}))}))},wt=function(t,e){var n=t.state,r=t.dispatch,a=t.commit;return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,tt(e.title,e.organization||"",e.department||"",e.description||"",e.file)];case 1:return t=o.sent(),a(it.DOCUMENTS,{documents:n.documents.concat([t])}),r(ot.NOTIFICATION,{message:"Document successfully created",type:"success"}),[2,t];case 2:return o.sent(),console.error(">> err"),r(ot.NOTIFICATION,{message:"Unable to create document",type:"error"}),[3,3];case 3:return[2]}}))}))},Dt=function(t,e){var n=t.state,r=t.dispatch,a=t.commit;return c["b"](lt,void 0,void 0,(function(){var t,o;return c["e"](this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,et(e.id)];case 1:return i.sent(),t=n.documents.filter((function(t){return t.id!==e.id})),a(it.DOCUMENTS,{documents:t}),r(ot.NOTIFICATION,{message:"Document deleted.",type:"success"}),[3,3];case 2:return o=i.sent(),console.error(">> err",o),r(ot.NOTIFICATION,{message:"Unable to delete documents.",type:"error"}),[3,3];case 3:return[2]}}))}))},xt=function(t,e){var n=t.dispatch,r=e.document;return c["b"](lt,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,nt(r)];case 1:return e.sent(),n(ot.NOTIFICATION,{message:"Document updated.",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(ot.NOTIFICATION,{message:"Unable to update documents.",type:"error"}),[3,3];case 3:return[2]}}))}))},Tt=function(t,e){var n=t.dispatch,r=t.commit;return c["b"](lt,void 0,void 0,(function(){var t,a;return c["e"](this,(function(o){switch(o.label){case 0:e=e||{page:0},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,K(e)];case 2:return t=o.sent().data,r(it.USERS,{users:t.data.map(st.fromBackend)}),[3,4];case 3:return a=o.sent(),console.error(">> err",a),n(ot.NOTIFICATION,{message:"Unable to load users.",type:"error"}),[3,4];case 4:return[2]}}))}))},Et=function(t,e){var n=t.dispatch,r=t.state,a=t.commit,o=e.user;return c["b"](lt,void 0,void 0,(function(){var t,e,i,s;return c["e"](this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,at(st.toBackend(o))];case 1:return t=c.sent().data.user,e=r.users.slice(),i=e.findIndex((function(e){return e.id===t.id})),-1!==i&&e.splice(i,1,st.fromBackend(t)),console.log("New users:",JSON.stringify(e)),a(it.USERS,{users:e}),n(ot.NOTIFICATION,{message:"User updated.",type:"success"}),[2,t];case 2:return s=c.sent(),console.error(">> err",s),n(ot.NOTIFICATION,{message:"Unable to update user.",type:"error"}),[3,3];case 3:return[2]}}))}))},St=function(t,e){var n=t.state,r=t.dispatch,a=t.commit;return c["b"](lt,void 0,void 0,(function(){var t,o;return c["e"](this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,rt(e.id)];case 1:return i.sent(),t=n.users.filter((function(t){return t.id!==e.id})),a(it.USERS,{users:t}),r(ot.NOTIFICATION,{message:"User deleted.",type:"success"}),[3,3];case 2:return o=i.sent(),console.error(">> err",o),r(ot.NOTIFICATION,{message:"Unable to delete user.",type:"error"}),[3,3];case 3:return[2]}}))}))},Nt=function(t,e){var n=t.dispatch,r=t.commit;return c["b"](lt,void 0,void 0,(function(){var t,a;return c["e"](this,(function(o){switch(o.label){case 0:e=e||{page:0},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,J(e)];case 2:return t=o.sent(),r(it.PURCHASES,t),[3,4];case 3:return a=o.sent(),console.error(">> err",a),n(ot.NOTIFICATION,{message:"Unable to load purchases.",type:"error"}),[3,4];case 4:return[2]}}))}))},Ut=(U={},U[ot.NOTIFICATION]=dt,U[ot.CONTACT]=pt,U[ot.LOGIN]=mt,U[ot.FORGOT_PASSWORD]=ft,U[ot.REGISTER]=ht,U[ot.RESET_PASSWORD]=vt,U[ot.LOAD_DOCUMENTS]=bt,U[ot.SEARCH_DOCUMENTS]=gt,U[ot.DOCUMENTS_LOAD_POPULAR]=yt,U[ot.LOAD_DOCUMENT]=_t,U[ot.ADMIN_LOAD_USERS]=Tt,U[ot.ADMIN_UPDATE_USER]=Et,U[ot.ADMIN_DELETE_USER]=St,U[ot.ADMIN_LOAD_PURCHASES]=Nt,U[ot.ADMIN_CREATE_DOCUMENT]=wt,U[ot.ADMIN_DELETE_DOCUMENT]=Dt,U[ot.ADMIN_UPDATE_DOCUMENT]=xt,U[ot.PRE_PURCHASE_DOCUMENT]=Ct,U[ot.CHECK_PURCHASE_DOCUMENT]=Ot,U[ot.GET_USER_DOCUMENTS]=At,U),Pt=(P={},P[it.LOADING]=function(t,e){t.loading=e},P[it.NOTIFICATION]=function(t,e){t.notification=e},P[it.LOGIN]=function(t,e){var n=e.user,r=e.token;t.user=n,t.token=r},P[it.LOGOUT]=function(t){t.user=null,t.token=null},P[it.USER]=function(t,e){var n=e.user;t.user=n},P[it.TOKEN]=function(t,e){var n=e.token;t.token=n},P[it.DOCUMENTS]=function(t,e){var n=e.documents;t.documents=n},P[it.CURRENT_DOCUMENT]=function(t,e){var n=e.document;t.currentDocument=n},P[it.PURCHASES]=function(t,e){var n=e.purchases;t.purchases=n},P[it.CURRENT_PURCHASE]=function(t,e){var n=e.purchase;t.currentPurchase=n},P[it.USERS]=function(t,e){var n=e.users;t.users=n},P[it.POPULAR_DOCUMENTS]=function(t,e){var n=e.documents;t.popularDocuments=n},P);r["a"].use(w["a"]);var kt=new w["a"].Store({state:{loading:!1,notification:null,user:null,token:null,documents:[],currentDocument:null,popularDocuments:[],purchases:[],currentPurchase:null,payment:null,users:[],editUser:null},getters:{isLoggedOn:function(t){return!(!t.user||!t.token)},isAdmin:function(t){return!(!t.user||"admin"!==t.user.role)}},mutations:Pt,actions:Ut,plugins:[Object(j["a"])({paths:["token","user"]})]});kt.subscribe((function(t,e){L(e.token)}));var It=function(){return{id:"",title:"",organization:"",department:"",description:"",text:"",price:10}},jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),Object.defineProperty(e.prototype,"notification",{get:function(){return this.notif},set:function(t){this.setNotification(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){if(this.notif)switch(this.notif.type){case"success":return"green lighten-1";case"warn":return"amber darken-3";case"error":return"red darken-1"}return"blue lighten-1"},enumerable:!0,configurable:!0}),e.prototype.handleTokenChange=function(t,e){t&&!e&&L(this.token)},c["c"]([Object(k["c"])("token")],e.prototype,"token",void 0),c["c"]([Object(k["c"])("notification")],e.prototype,"notif",void 0),c["c"]([Object(k["a"])(ot.NOTIFICATION)],e.prototype,"setNotification",void 0),c["c"]([Object(I["c"])("token",{immediate:!0})],e.prototype,"handleTokenChange",null),e=c["c"]([Object(u["default"])({components:{AppFooter:C,Loader:N}})],e),e}(r["a"]),Vt=jt,Rt=Vt,Mt=n("7496"),Lt=n("2db4"),Ft=Object(f["a"])(Rt,i,s,!1,null,null,null),qt=Ft.exports;v()(Ft,{VApp:Mt["a"],VBtn:b["a"],VSnackbar:Lt["a"]});var Bt=n("9483");Object(Bt["a"])("/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var Ht=n("8c4f"),zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{light:""}},[n("v-app-bar",{attrs:{"clipped-left":t.clipped,fixed:"",app:""}},[n("router-link",{attrs:{to:{name:"home"}}},[n("img",{style:t.logoStyle,attrs:{src:t.logo,alt:t.title}})]),n("v-toolbar-title",[n("h3",{class:t.topBarClass},[t._v(t._s(t.title))])]),n("v-spacer"),n("account-button")],1),n("v-content",[n("router-view")],1)],1)},Gt=[],Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{color:"primary",dark:""}},r),[t._v(" Hello, "),n("b",[t._v(t._s(t.user.name))])])]}}],null,!1,989370058)},[n("v-list",[n("v-list-item",{attrs:{link:"",to:"/"}},[n("v-list-item-title",[t._v("Home")])],1),n("v-list-item",{attrs:{link:"",to:"/document/purchases"}},[n("v-list-item-title",[t._v("My purchases")])],1),t.isAdmin?n("v-menu",{attrs:{"offset-x":"","open-on-hover":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-list-item",t._g({attrs:{link:""}},r),[n("v-list-item-title",[t._v("Admin")]),n("v-list-item-action",[n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-chevron-right")])],1)],1)],1)]}}],null,!1,2733391519)},[n("v-list",[n("v-list-item",{attrs:{link:"",to:"/admin/list_documents"}},[n("v-list-item-title",[t._v("Documents")])],1),n("v-list-item",{attrs:{link:"",to:"/admin/list_users"}},[n("v-list-item-title",[t._v("Users")])],1)],1)],1):t._e(),n("v-divider"),n("v-list-item",{attrs:{link:""},on:{click:t.handleLogout}},[n("v-list-item-title",[t._v("Logout")])],1)],1)],1):n("v-btn",{attrs:{color:"primary",dark:"",to:"/account/login"}},[t._v("Login / Register")])},Wt=[],Kt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.menuItems=[{title:"Home",to:"/"},{title:"My purchases",to:"/document/purchases"},{title:"Logout",click:e.handleLogout}],e}return c["d"](e,t),Object.defineProperty(e.prototype,"isAdmin",{get:function(){return this.user&&"admin"===this.user.role},enumerable:!0,configurable:!0}),e.prototype.handleLogout=function(){this.logout(),this.$router.go(0)},c["c"]([Object(k["c"])("user")],e.prototype,"user",void 0),c["c"]([Object(k["b"])(it.LOGOUT)],e.prototype,"logout",void 0),e=c["c"]([Object(u["default"])({components:{DefaultLayout:fe}})],e),e}(r["a"]),Jt=Kt,Qt=Jt,$t=n("ce7e"),Zt=n("132d"),Xt=n("8860"),te=n("da13"),ee=n("1800"),ne=n("5d23"),re=n("e449"),ae=Object(f["a"])(Qt,Yt,Wt,!1,null,null,null),oe=ae.exports;v()(ae,{VBtn:b["a"],VDivider:$t["a"],VIcon:Zt["a"],VList:Xt["a"],VListItem:te["a"],VListItemAction:ee["a"],VListItemTitle:ne["b"],VMenu:re["a"]});var ie=n("4ffd"),se=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drawer=!1,e.miniVariant=!1,e.clipped=!1,e.title="Sailshift",e.logo=ie,e.items=[{icon:"mdi-apps",title:"Welcome",to:"/"},{icon:"mdi-chart-bubble",title:"Inspire",to:"/inspire"}],e}return c["d"](e,t),Object.defineProperty(e.prototype,"logoStyle",{get:function(){switch(this.$vuetify.breakpoint.name){case"xs":case"sm":return{height:"42px",width:"42px",marginRight:"8px",borderRadius:"3px"};default:return{height:"48px",width:"48px",marginRight:"16px",borderRadius:"5px"}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topBarClass",{get:function(){switch(this.$vuetify.breakpoint.name){case"xs":return"d-none";case"sm":return"display-1";default:return"display-3"}},enumerable:!0,configurable:!0}),e=c["c"]([Object(u["default"])({components:{AccountButton:oe}})],e),e}(r["a"]),ce=se,ue=ce,le=n("40dc"),de=n("a75b"),pe=n("2a7f"),me=Object(f["a"])(ue,zt,Gt,!1,null,null,null),fe=me.exports;v()(me,{VApp:Mt["a"],VAppBar:le["a"],VContent:de["a"],VSpacer:y["a"],VToolbarTitle:pe["a"]});var he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:""}},[n("v-content",[n("v-container",{staticClass:"fill-height"},[n("router-view")],1)],1)],1)},ve=[],be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e=c["c"]([Object(u["default"])({components:{}})],e),e}(r["a"]),ge=be,ye=ge,_e=n("a523"),Ce=Object(f["a"])(ye,he,ve,!1,null,null,null),Oe=Ce.exports;v()(Ce,{VApp:Mt["a"],VContainer:_e["a"],VContent:de["a"]});var Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{lg:"6",md:"6",sm:"12"}},[n("form",{staticClass:"heading",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[n("h1",{class:t.titleClass},[t._v("SAILSHIFT")]),n("h3",{staticClass:"headline text-center mb-8"},[t._v("Get Help with your Homework Today")]),n("v-text-field",{staticClass:"search-input pb-8",attrs:{outlined:"","append-outer-icon":"mdi-magnify","clear-icon":"mdi-close-circle",clearable:"",label:"",type:"text"},on:{"click:append-outer":t.search},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1)])],1),n("top-purchases",{attrs:{title:"Top documents"}})],1)],1)},we=[],De=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"popular"},[n("v-col",[n("v-row",[n("v-col",[n("h3",{staticClass:"headline text-center"},[t._v(t._s(t.title))])])],1),t.hasPopular?n("v-row",t._l(t.popularDocuments,(function(e,r){return n("v-col",{key:r},[n("document-card",{attrs:{document:e,maxHeight:t.maxHeight,maxWidth:t.maxWidth,showPurchase:!1}})],1)})),1):n("v-row",{staticClass:"justify-center"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"24",color:"indigo darken-2"}}),n("div",{staticClass:"ml-4 body-2"},[t._v("Loading popular...")])],1)],1)],1)},xe=[],Te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"document-car-outer",attrs:{to:{name:"document.document",params:{documentId:t.document.id}}}},[n("v-card",{staticClass:"document-card",attrs:{"max-width":t.maxWidth,"max-height":t.maxHeight}},[n("v-card-title",{staticClass:"headline text-truncate"},[t._v(t._s(t.document.title))]),n("v-card-subtitle",{staticClass:"pb-0"},[t._v(t._s(t.document.organization))]),n("v-card-text",{staticClass:"text--primary text-fade card-text"},[t._v(t._s(t.document.text))]),t.showPurchase?n("v-card-actions",[n("v-btn",{attrs:{color:"primary"},on:{click:t.onPurchase}},[t._v("Purchase document")])],1):t._e()],1)],1)},Ee=[],Se=n("fce7"),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),c["c"]([Object(I["b"])({default:200})],e.prototype,"maxHeight",void 0),c["c"]([Object(I["b"])({default:200})],e.prototype,"maxWidth",void 0),c["c"]([Object(I["b"])(Se["Document"])],e.prototype,"document",void 0),c["c"]([Object(I["b"])({default:!1})],e.prototype,"showPurchase",void 0),c["c"]([Object(I["b"])(Function)],e.prototype,"onPurchase",void 0),e=c["c"]([Object(u["default"])({})],e),e}(r["a"]),Ue=Ne,Pe=Ue,ke=(n("7c82"),n("b0af")),Ie=n("99d9"),je=Object(f["a"])(Pe,Te,Ee,!1,null,"65e35d72",null),Ve=je.exports;v()(je,{VBtn:b["a"],VCard:ke["a"],VCardActions:Ie["a"],VCardSubtitle:Ie["b"],VCardText:Ie["c"],VCardTitle:Ie["d"]});var Re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),Object.defineProperty(e.prototype,"hasPopular",{get:function(){return this.popularDocuments&&this.popularDocuments},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.loadPopularDocuments()},c["c"]([Object(I["b"])({default:"Top purchased"})],e.prototype,"title",void 0),c["c"]([Object(I["b"])({default:200})],e.prototype,"maxHeight",void 0),c["c"]([Object(I["b"])({default:200})],e.prototype,"maxWidth",void 0),c["c"]([Object(k["c"])("popularDocuments")],e.prototype,"popularDocuments",void 0),c["c"]([Object(k["a"])(ot.DOCUMENTS_LOAD_POPULAR)],e.prototype,"loadPopularDocuments",void 0),e=c["c"]([Object(u["default"])({components:{DocumentCard:Ve}})],e),e}(r["a"]),Me=Re,Le=Me,Fe=n("62ad"),qe=n("0fd9"),Be=Object(f["a"])(Le,De,xe,!1,null,"d2424e50",null),He=Be.exports;v()(Be,{VCol:Fe["a"],VProgressCircular:E["a"],VRow:qe["a"]});var ze=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.query="",e}return c["d"](e,t),e.prototype.search=function(){this.$router.push({name:"document.search",query:{query:this.query}})},Object.defineProperty(e.prototype,"titleClass",{get:function(){switch(this.$vuetify.breakpoint.name){case"xs":return"display-2 text-center mb-8";default:return"display-4 text-center mb-8"}},enumerable:!0,configurable:!0}),e=c["c"]([Object(u["default"])({components:{TopPurchases:He}})],e),e}(r["a"]),Ge=ze,Ye=Ge,We=(n("f47b"),n("8654")),Ke=Object(f["a"])(Ye,Ae,we,!1,null,"1ab4e866",null),Je=Ke.exports;v()(Ke,{VCol:Fe["a"],VRow:qe["a"],VTextField:We["a"]});var Qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[n("v-card",{attrs:{"max-width":""}},[n("v-card-title",[t._v(" Login ")]),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-row",[n("v-col",{staticClass:"text-right pt-0"},[n("router-link",{staticClass:"no-underline small",attrs:{to:"/account/forgot_password"}},[t._v("Forgot password?")])],1)],1),n("v-row",{staticClass:"align-center"},[n("v-col",{staticClass:"pt-0 pb-0"},[n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v(" Login ")]),n("span",{staticClass:"separator pl-4 pr-4"},[t._v(" OR ")]),n("router-link",{staticClass:"no-underline",attrs:{to:"/account/register"}},[t._v("Register")])],1)],1)],1)],1)],1)],1)],1)},$e=[],Ze=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.email="",e.password="",e.valid=!0,e}return c["d"](e,t),Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:if(!this.form.validate())return[2];this.loading(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,this.login({email:this.email,password:this.password})];case 2:return t=e.sent(),t&&this.$router.push({name:La.home}),[3,4];case 3:return this.loading(!1),[7];case 4:return[2]}}))}))},c["c"]([Object(k["b"])(it.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(k["a"])(ot.LOGIN)],e.prototype,"login",void 0),e=c["c"]([Object(u["default"])({components:{}})],e),e}(r["a"]),Xe=Ze,tn=Xe,en=(n("a20a"),n("4bd4")),nn=Object(f["a"])(tn,Qe,$e,!1,null,"3bc8aac1",null),rn=nn.exports;v()(nn,{VBtn:b["a"],VCard:ke["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:We["a"]});var an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[n("v-card",{attrs:{"max-width":""}},[n("v-card-title",[t._v("Register")]),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"E-mail",required:"",rules:t.rules.email},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-text-field",{attrs:{label:"Password",type:"password",required:"",rules:t.rules.password},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-text-field",{attrs:{label:"Password confirmation",type:"password",required:"",rules:t.rules.password},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}}),n("v-row",{staticClass:"align-center"},[n("v-col",{staticClass:"pb-0"},[n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v("Register")]),n("span",{staticClass:"separator pl-4 pr-4"},[t._v("OR")]),n("router-link",{staticClass:"no-underline",attrs:{to:"/account/login"}},[t._v("Already have an account?")])],1)],1)],1)],1)],1)],1)],1)},on=[],sn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.email="",e.password="",e.confirmation="",e.valid=!0,e.rules={password:[function(t){return!!t||"Password is required"},function(t){return t.length>=6||"Password must be at least 6 characters long"}],email:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}]},e}return c["d"](e,t),Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){return c["e"](this,(function(t){switch(t.label){case 0:if(!this.form.validate())return[2];if(this.password!==this.confirmation)return alert("Password must match confirmation"),[2];this.loading(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,this.register({email:this.email,password:this.password,confirmation:this.confirmation})];case 2:return t.sent(),[3,4];case 3:return this.loading(!1),[7];case 4:return[2]}}))}))},c["c"]([Object(k["b"])(it.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(k["a"])(ot.REGISTER)],e.prototype,"register",void 0),e=c["c"]([Object(u["default"])({components:{}})],e),e}(r["a"]),cn=sn,un=cn,ln=(n("7346"),Object(f["a"])(un,an,on,!1,null,"69660b06",null)),dn=ln.exports;v()(ln,{VBtn:b["a"],VCard:ke["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:We["a"]});var pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[n("v-card",{attrs:{"max-width":""}},[n("v-card-title",[t._v(" Forgot password? ")]),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"E-mail",rules:t.rules.email,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-row",[n("v-col",{staticClass:"text-right pt-0"},[n("router-link",{staticClass:"no-underline small",attrs:{to:"/account/login"}},[t._v("Remember your password?")])],1)],1),n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v(" Reset ")])],1)],1)],1)],1)],1)},mn=[],fn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.email="",e.valid=!0,e.rules={email:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}]},e}return c["d"](e,t),Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:if(!this.form.validate())return[2];this.loading(!0),e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,this.forgotPassword({email:this.email})];case 2:return e.sent(),[3,5];case 3:return t=e.sent(),console.error(">>>",t),[3,5];case 4:return this.loading(!1),[7];case 5:return[2]}}))}))},c["c"]([Object(k["b"])(it.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(k["a"])(ot.FORGOT_PASSWORD)],e.prototype,"forgotPassword",void 0),e=c["c"]([Object(u["default"])({components:{}})],e),e}(r["a"]),hn=fn,vn=hn,bn=(n("3add"),Object(f["a"])(vn,pn,mn,!1,null,"60b5d040",null)),gn=bn.exports;v()(bn,{VBtn:b["a"],VCard:ke["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:We["a"]});var yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[t.token&&!t.success?n("v-card",{attrs:{"max-width":""}},[t.success?t._e():n("v-card-title",[t._v("Set new password")]),t.token&&!t.success?n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"Password",type:"password",required:"",rules:t.rules.password},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-text-field",{attrs:{label:"Confirmation",type:"password",required:"",rules:t.rules.password},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}}),n("v-row",{staticClass:"align-center"},[n("v-col",{staticClass:"pt-0 pb-0"},[n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v("Set new password")])],1)],1)],1)],1):t._e()],1):t._e(),t.token?t._e():n("v-card",{attrs:{"max-width":""}},[n("v-card-title",{staticClass:"red--text lighten-1 display-1 justify-center"},[t._v("Token is invalid")])],1),t.success?n("v-card",{attrs:{"max-width":""}},[t.success?n("v-card-title",[n("h3",[t._v(" New password was set. Please "),n("router-link",{staticClass:"no-underline",attrs:{to:"/account/login"}},[t._v("login")])],1)]):t._e()],1):t._e()],1)],1)},_n=[],Cn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.password="",e.confirmation="",e.token="",e.valid=!0,e.success=!1,e.rules={password:[function(t){return!!t||"Password is required"},function(t){return t.length>=6||"Password must be at least 6 characters long"}]},e}return c["d"](e,t),e.prototype.created=function(){this.token=this.$route.params.token},Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){return c["e"](this,(function(t){switch(t.label){case 0:if(!this.form.validate())return[2];if(this.password!==this.confirmation)return alert("Password must match confirmation"),[2];if(this.password.length<6)return alert("Password must match confirmation"),[2];this.loading(!0),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,this.resetPassword({password:this.password,confirmation:this.confirmation,token:this.token})];case 2:return t.sent(),this.success=!0,[3,5];case 3:return t.sent(),this.success=!1,[3,5];case 4:return this.loading(!1),[7];case 5:return[2]}}))}))},c["c"]([Object(k["b"])(it.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(k["a"])(ot.RESET_PASSWORD)],e.prototype,"resetPassword",void 0),e=c["c"]([Object(u["default"])({components:{}})],e),e}(r["a"]),On=Cn,An=On,wn=Object(f["a"])(An,yn,_n,!1,null,null,null),Dn=wn.exports;v()(wn,{VBtn:b["a"],VCard:ke["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:We["a"]});var xn,Tn,En=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height white",attrs:{fluid:""}},[t.document?n("div",[n("v-row",{staticClass:"document-heading"},[n("v-col",[t._v(" "+t._s(t.document?t.document.organization:"...")+" | "+t._s(t.document&&t.document.department||"â")+" ")])],1),n("v-row",{staticClass:"document-main flex-row"},[n("v-col",{attrs:{sm:"12",md:"8",lg:"9"}},[n("v-card",{staticClass:"pl-4 pr-4"},[n("v-card-title",{staticClass:"justify-center"},[n("h2",{staticClass:"heading"},[t._v(t._s(t.document?t.document.title:"..."))])]),n("v-card-text",[n("p",{style:{textAlign:"justify"}},[t._v(t._s(t.document?t.document.text:"..."))])])],1)],1),n("v-col",{attrs:{sm:"12",md:"4",lg:"3"}},[n("v-card",[n("v-card-subtitle",[t._v(' Upon payment document appears under your profile "active documents" section. ')]),n("v-card-title",{staticClass:"display-3 justify-center"},[t._v(" $"+t._s(t.document?t.document.price.toFixed(2):"...")+" ")]),n("v-card-actions",{staticClass:"justify-center"},[t.user&&t.user.id?n("purchase-dialog",{attrs:{title:"Purchase document",user:t.user,document:t.document,onPurchase:t.handlePurchase,onClose:t.handleClose}}):t._e()],1),n("v-card-subtitle",{staticClass:"pa-2 text-center font-weight-light"},[t._v(" Proudly secured by Stripe ")])],1)],1)],1)],1):n("v-row",{staticClass:"justify-center"},[t.documentNotFound?n("div",[n("h3",{staticClass:"ml-4 red--text lighten-4 display-2"},[t._v("Document you searching for not found.")]),n("h4",{staticClass:"text-center mt-4"},[t._v("You could try to "),n("router-link",{attrs:{to:{name:"document.search"}}},[t._v("search using another conditions")])],1)]):n("div",{staticClass:"d-flex"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"24",color:"indigo darken-2"}}),n("div",{staticClass:"ml-4 body-2"},[t._v("Loading document...")])],1)]),n("top-purchases",{attrs:{title:"Popular documents",maxHeight:180,maxWidth:180}})],1)},Sn=[],Nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"700"},on:{input:t.handleDialogInput},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{color:"red lighten-2",dark:""}},r),[t._v(" "+t._s(t.title||"Purchase")+" ")])]}}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},["intent"===t.paymentStep?n("prepurchase-card",{attrs:{document:t.document,onConfirm:t.handlePrepurchase,onCancel:t.handleClose}}):t._e(),"payment"===t.paymentStep?n("purchase-card",{attrs:{document:t.document,user:t.user,onConfirm:t.handlePurchase,onCancel:t.handleClose}}):t._e(),"done"===t.paymentStep?n("payment-result-card",{attrs:{error:t.paymentError,intent:t.paymentIntent,onConfirm:t.handleResult}}):t._e()],1)},Un=[],Pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e.prototype.runWithLoading=function(t,e){return c["b"](this,void 0,void 0,(function(){var n,r;return c["e"](this,(function(a){switch(a.label){case 0:this.loading(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,t()];case 2:return n=a.sent(),[2,n];case 3:return r=a.sent(),e&&e(r),[3,5];case 4:return this.loading(!1),[7];case 5:return[2]}}))}))},e.prototype.awaitForConditionAndRun=function(t,e){return c["b"](this,void 0,void 0,(function(){var n,r,a,o;return c["e"](this,(function(i){switch(i.label){case 0:n=5,r=300,a=1.2,o=!1,i.label=1;case 1:return n>=0?(n--,console.log(">> 1",o),o?[2,e()]:(console.log(">> 2",t()),t()&&(o=!0),[4,new Promise((function(t){return setTimeout((function(){return t()}),r)}))])):[3,3];case 2:return i.sent(),r*=a,console.log(">> 3",r),[3,1];case 3:return[2]}}))}))},c["c"]([Object(k["b"])(it.LOADING)],e.prototype,"loading",void 0),e=c["c"]([Object(u["default"])({})],e),e}(r["a"]),kn=Pn,In=kn,jn=Object(f["a"])(In,xn,Tn,!1,null,null,null),Vn=jn.exports,Rn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"pre-purchase-card"},[n("v-card-title",{staticClass:"headline teal lighten-3 mb-4",attrs:{"primary-title":""}},[t._v(" Purchase review and data collection policy ")]),n("v-card-text",[n("div",[n("p",[t._v("You're going to purchase following document:")]),n("div",{staticClass:"title"},[t._v("Document: "),n("b",[t._v(t._s(t.document.title))])]),n("div",{staticClass:"title"},[t._v("Price: "),n("b",[t._v("$"+t._s(t.document.price.toFixed(2)))])])]),n("div",[n("p",[t._v("All payments are performed through Stripe and we do not store any of your credit card data.")])])]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.onConfirm}},[t._v(" Confirm ")]),n("v-btn",{attrs:{color:"default",text:""},on:{click:t.onCancel}},[t._v(" Cancel ")])],1)],1)},Mn=[],Ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),c["c"]([Object(I["b"])(Function)],e.prototype,"onCancel",void 0),c["c"]([Object(I["b"])(Function)],e.prototype,"onConfirm",void 0),c["c"]([Object(I["b"])(Object)],e.prototype,"document",void 0),e=c["c"]([Object(u["default"])({})],e),e}(r["a"]),Fn=Ln,qn=Fn,Bn=Object(f["a"])(qn,Rn,Mn,!1,null,null,null),Hn=Bn.exports;v()(Bn,{VBtn:b["a"],VCard:ke["a"],VCardActions:Ie["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VDivider:$t["a"],VSpacer:y["a"]});var zn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"purchase-card"},[n("v-card-title",{staticClass:"headline teal lighten-3 mb-4",attrs:{"primary-title":""}},[t._v(" Payment details ")]),n("v-card-text",[n("stripe-elements",{ref:"stripeRef",attrs:{pk:t.stripePublishableKey,amount:t.amount}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.handleConfirm}},[t._v(" Pay $"+t._s(t.amount/100)+" ")]),n("v-btn",{attrs:{color:"default",text:""},on:{click:t.onCancel}},[t._v(" Cancel ")])],1)],1)},Gn=[],Yn=n("bce0"),Wn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stripePublishableKey="pk_test_hNvUnzfcexW7qmN3MEruc1z500r9xWacbZ",e}return c["d"](e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this.document?Math.floor(100*this.document.price):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stripeElement",{get:function(){return this.$refs.stripeRef},enumerable:!0,configurable:!0}),e.prototype.handleConfirm=function(){if(this.user){var t=this.stripeElement.stripe;this.onConfirm(t,{payment_method:{card:this.stripeElement.card,billing_details:{name:this.user.name}}})}},c["c"]([Object(k["c"])("user")],e.prototype,"user",void 0),c["c"]([Object(I["b"])(Function)],e.prototype,"onCancel",void 0),c["c"]([Object(I["b"])(Function)],e.prototype,"onConfirm",void 0),c["c"]([Object(I["b"])(Object)],e.prototype,"document",void 0),e=c["c"]([Object(u["default"])({components:{StripeElements:Yn["StripeElements"]}})],e),e}(r["a"]),Kn=Wn,Jn=Kn,Qn=Object(f["a"])(Jn,zn,Gn,!1,null,null,null),$n=Qn.exports;v()(Qn,{VBtn:b["a"],VCard:ke["a"],VCardActions:Ie["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VDivider:$t["a"],VSpacer:y["a"]});var Zn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"payment-result-card"},[n("v-card-title",{staticClass:"headline teal lighten-3 mb-4",attrs:{"primary-title":""}},[t._v(" Payment results ")]),n("v-card-text",[t.error?n("div"):t._e(),t.intent?n("div",[n("p",[t._v(" Your payment "),n("b",[t._v(t._s(t.intent.id))]),t._v(" has been received and is now processing. If payment is successfully processed, feel free to close this popup. Otherwise, please wait as we process your payment. ")]),t.purchase?t._e():n("v-progress-linear",{attrs:{indeterminate:"",size:"32"}}),n("div",[n("span",{domProps:{innerHTML:t._s(t.message)}})])],1):t._e()]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.onConfirm}},[t._v(" Close ")])],1)],1)},Xn=[],tr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.message="Checking payment status...",e.timer=null,e.timeoutInterval=3e3,e.dontSetTimeout=!1,e.purchase=null,e.checking=!1,e.checkAttempts=0,e.checkAttemptsWarn=4,e.checkAttemptsStop=6,e}return c["d"](e,t),Object.defineProperty(e.prototype,"paymentId",{get:function(){return this.intent?this.intent.id:null},enumerable:!0,configurable:!0}),e.prototype.stopTimer=function(){this.timer&&(this.dontSetTimeout=!0,clearTimeout(this.timer),this.timer=null)},e.prototype.timerHandler=function(){return c["b"](this,void 0,void 0,(function(){var t,e,n=this;return c["e"](this,(function(r){switch(r.label){case 0:if(this.checkAttempts>=this.checkAttemptsWarn&&(this.message="Payment processeing takes a little bit longer time..."),this.checkAttempts>=this.checkAttemptsStop)return console.log(">> Payment wasn't confirmed after "+this.checkAttemptsStop+" attemps, stop further checking"),this.stopTimer(),[2];if(!this.paymentId)return[3,5];this.message="Checking payment "+this.paymentId+" status...",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.checkPurchase(this.paymentId)];case 2:return t=r.sent(),this.purchase=t.purchase||{},[3,4];case 3:return e=r.sent(),console.log(">> check purchase faile with error",e),this.purchase=null,[3,4];case 4:return this.purchase&&"failed"===this.purchase.paymentStatus?(this.message="Payment failed, please contact us with payment Id "+this.paymentId,[2]):this.purchase&&"success"===this.purchase.paymentStatus?(this.message='Payment successful! Here is <a _target="blank" href="'+this.purchase.downloadUrl+'">link to document download.</a>. Also you can find this document on your profile page. Document was purchased at '+this.purchase.purchasedAt+" (UTC) and will be available until "+this.purchase.validUntil+" (UTC)",[2]):(this.message="Payment "+this.paymentId+" not processed yet, waiting...",[3,6]);case 5:console.log(">> No payment id"),r.label=6;case 6:return this.timer=setTimeout((function(){n.checkAttempts++,n.timerHandler()}),this.timeoutInterval),[2]}}))}))},e.prototype.mounted=function(){var t=this;console.log(">> PaymentResultCard mounted"),this.timer=setTimeout((function(){return t.timerHandler()}),this.timeoutInterval)},e.prototype.beforeDestroy=function(){console.log(">> PaymentResultCard going to be destroyed"),this.stopTimer()},c["c"]([Object(I["b"])(Function)],e.prototype,"onConfirm",void 0),c["c"]([Object(I["b"])(Object)],e.prototype,"error",void 0),c["c"]([Object(I["b"])(Object)],e.prototype,"intent",void 0),c["c"]([Object(k["a"])(ot.CHECK_PURCHASE_DOCUMENT)],e.prototype,"checkPurchase",void 0),e=c["c"]([Object(u["default"])({})],e),e}(r["a"]),er=tr,nr=er,rr=n("8e36"),ar=Object(f["a"])(nr,Zn,Xn,!1,null,null,null),or=ar.exports;v()(ar,{VBtn:b["a"],VCard:ke["a"],VCardActions:Ie["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VDivider:$t["a"],VProgressLinear:rr["a"],VSpacer:y["a"]});var ir=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.open=!1,e.paymentStep="intent",e.clientSecret=null,e.paymentError=null,e.paymentIntent=null,e}return c["d"](e,t),e.prototype.mounted=function(){this.paymentIntent={id:"evt_1GkvJDJtdDvmMFZWHlYXqnjE",object:"event",api_version:"2020-03-02",created:1589994143,data:{object:{id:"pi_1Gl5zOJtdDvmMFZWLRQ9UBIq",object:"payment_intent",amount:2150,amount_capturable:0,amount_received:2150,application:null,application_fee_amount:null,canceled_at:null,cancellation_reason:null,capture_method:"automatic",charges:{object:"list",data:[{id:"ch_1GkvJDJtdDvmMFZW4Fe7EDGt",object:"charge",amount:2150,amount_refunded:0,application:null,application_fee:null,application_fee_amount:null,balance_transaction:"txn_1GkvJDJtdDvmMFZWKc6sgxBg",billing_details:{address:{city:null,country:null,line1:null,line2:null,postal_code:"12312",state:null},email:null,name:"Alex The First",phone:null},calculated_statement_descriptor:"Stripe",captured:!0,created:1589994143,currency:"usd",customer:null,description:null,destination:null,dispute:null,disputed:!1,failure_code:null,failure_message:null,fraud_details:{},invoice:null,livemode:!1,metadata:{purchase_id:"26"},on_behalf_of:null,order:null,outcome:{network_status:"approved_by_network",reason:null,risk_level:"normal",risk_score:19,seller_message:"Payment complete.",type:"authorized"},paid:!0,payment_intent:"pi_1Gl5zOJtdDvmMFZWLRQ9UBIq",payment_method:"pm_1GkvJCJtdDvmMFZW94DLrWBD",payment_method_details:{card:{brand:"visa",checks:{address_line1_check:null,address_postal_code_check:"pass",cvc_check:"pass"},country:"US",exp_month:11,exp_year:2023,fingerprint:"xLMBPWFOLLET9ku4",funding:"credit",installments:null,last4:"4242",network:"visa",three_d_secure:null,wallet:null},type:"card"},receipt_email:"nosuchip@gmail.com",receipt_number:null,receipt_url:"https://pay.stripe.com/receipts/acct_184PqDJtdDvmMFZW/ch_1GkvJDJtdDvmMFZW4Fe7EDGt/rcpt_HJYQB5cuADKQYXKpCVRmIW3ZVEQn3EQ",refunded:!1,refunds:{object:"list",data:[],has_more:!1,total_count:0,url:"/v1/charges/ch_1GkvJDJtdDvmMFZW4Fe7EDGt/refunds"},review:null,shipping:null,source:null,source_transfer:null,statement_descriptor:null,statement_descriptor_suffix:null,status:"succeeded",transfer_data:null,transfer_group:null}],has_more:!1,total_count:1,url:"/v1/charges?payment_intent=pi_1Gl5zOJtdDvmMFZWLRQ9UBIq"},client_secret:"pi_1Gl5zOJtdDvmMFZWLRQ9UBIq_secret_kf73A6xJS5vlJVEJMpBiCdB03",confirmation_method:"automatic",created:1589994130,currency:"usd",customer:null,description:null,invoice:null,last_payment_error:null,livemode:!1,metadata:{purchase_id:"26"},next_action:null,on_behalf_of:null,payment_method:"pm_1GkvJCJtdDvmMFZW94DLrWBD",payment_method_options:{card:{installments:null,request_three_d_secure:"automatic"}},payment_method_types:["card"],receipt_email:"nosuchip@gmail.com",review:null,setup_future_usage:null,shipping:null,source:null,statement_descriptor:null,statement_descriptor_suffix:null,status:"succeeded",transfer_data:null,transfer_group:null}},livemode:!1,pending_webhooks:1,request:{id:"req_4NneSQNEJYyFMP",idempotency_key:null},type:"payment_intent.succeeded"}},e.prototype.handleDialogInput=function(t){t&&(this.paymentStep="intent")},e.prototype.handlePrepurchase=function(){return c["b"](this,void 0,void 0,(function(){var t,e=this;return c["e"](this,(function(n){switch(n.label){case 0:return this.document?(t={documentId:this.document.id,amount:this.document.price,currency:"usd",paymentMethod:"card"},console.log(">> prepayment payload:",t),[4,this.runWithLoading((function(){return c["b"](e,void 0,void 0,(function(){var e;return c["e"](this,(function(n){switch(n.label){case 0:return[4,this.prepurchase(t)];case 1:return e=n.sent().clientSecret,this.clientSecret=e,this.paymentStep="payment",[2]}}))}))}))]):[2];case 1:return n.sent(),[2]}}))}))},e.prototype.handlePurchase=function(t,e){return c["b"](this,void 0,void 0,(function(){var n,r,a;return c["e"](this,(function(o){switch(o.label){case 0:return console.log(">> purchase"),[4,t.confirmCardPayment(this.clientSecret,e)];case 1:return n=o.sent(),r=n.error,a=n.paymentIntent,this.paymentError=r||null,this.paymentIntent=a||null,this.paymentStep="done",[2]}}))}))},e.prototype.handleResult=function(){this.open=!1,this.onPurchase()},e.prototype.handleClose=function(){this.open=!1,this.onClose()},c["c"]([Object(I["b"])(String)],e.prototype,"title",void 0),c["c"]([Object(I["b"])(Function)],e.prototype,"onPurchase",void 0),c["c"]([Object(I["b"])(Function)],e.prototype,"onClose",void 0),c["c"]([Object(I["b"])(Object)],e.prototype,"user",void 0),c["c"]([Object(I["b"])(Object)],e.prototype,"document",void 0),c["c"]([Object(k["a"])(ot.PRE_PURCHASE_DOCUMENT)],e.prototype,"prepurchase",void 0),e=c["c"]([Object(u["default"])({components:{PrepurchaseCard:Hn,PurchaseCard:$n,PaymentResultCard:or}})],e),e}(Object(I["a"])(Vn)),sr=ir,cr=sr,ur=n("169a"),lr=Object(f["a"])(cr,Nn,Un,!1,null,"0ab4cab4",null),dr=lr.exports;v()(lr,{VBtn:b["a"],VDialog:ur["a"]});var pr=n("c832"),mr=n.n(pr),fr=n("8fba"),hr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.documentId="",e.documentNotFound=!1,e}return c["d"](e,t),e.prototype.onUrlChange=function(t,e){var n=mr()(t,"params.documentId"),r=mr()(e,"params.documentId");n!==r&&(this.setCurrentDocument({document:null}),this.documentId=this.$route.params.documentId,this.fetch())},e.prototype.fetch=function(){return c["b"](this,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return[4,this.loadDocument(this.documentId)];case 1:return t=e.sent(),this.documentNotFound=!t,[2]}}))}))},e.prototype.handlePurchase=function(){console.log("Purchased")},e.prototype.handleClose=function(){console.log("Not purchased")},e.prototype.getMetaInfo=function(){var t=this.document||{};return console.log(">> Rendering page metadata with document",JSON.stringify(t)),{title:this.document?this.document.title:"Sailshift: Document preview",htmlAttrs:{lang:"en",amp:"true"},meta:[{charset:"utf-8"},{name:"description",content:t.text?t.text.slice(0,100):"Sailshift: Document description"},{name:"organization",content:t.organization||""},{name:"department",content:t.department||""},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"og:description",content:t.text?t.text.slice(0,100):"Sailshift: Document description"},{name:"og:type",content:"document"},{name:"og:url",content:"https://sailshift.com/"},{name:"og:image",content:"https://sailshift.com/static/img/icons/android-chrome-192x192.png"}]}},c["c"]([Object(k["c"])("user")],e.prototype,"user",void 0),c["c"]([Object(k["c"])("token")],e.prototype,"token",void 0),c["c"]([Object(k["c"])("currentDocument")],e.prototype,"document",void 0),c["c"]([Object(k["a"])(ot.LOAD_DOCUMENT)],e.prototype,"loadDocument",void 0),c["c"]([Object(k["b"])(it.CURRENT_DOCUMENT)],e.prototype,"setCurrentDocument",void 0),c["c"]([Object(I["c"])("$route",{immediate:!0,deep:!0})],e.prototype,"onUrlChange",null),c["c"]([fr["Meta"]],e.prototype,"getMetaInfo",null),e=c["c"]([Object(u["default"])({components:{TopPurchases:He,PurchaseDialog:dr}})],e),e}(r["a"]),vr=hr,br=vr,gr=(n("d2d3"),Object(f["a"])(br,En,Sn,!1,null,"eb412062",null)),yr=gr.exports;v()(gr,{VCard:ke["a"],VCardActions:Ie["a"],VCardSubtitle:Ie["b"],VCardText:Ie["c"],VCardTitle:Ie["d"],VCol:Fe["a"],VContainer:_e["a"],VProgressCircular:E["a"],VRow:qe["a"]});var _r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"search-pane-container white pa-4 align-start",attrs:{"fill-height":"",fluid:""}},[n("v-row",{staticClass:"flex-column fill-height"},[n("search-filter-panel",{staticClass:"flex-0",attrs:{onSearch:t.handleSearch,onReset:t.handleReset,filters:t.filters,organizations:t.organizations,departments:t.departments}}),n("search-results-panel",{attrs:{documents:t.documents}}),n("v-row",{staticClass:"pagination-container flex-0"},[n("v-col",[n("v-pagination",{attrs:{page:t.pagination.page,length:t.pagination.pages,"total-visible":t.paginationTotalVisible},on:{input:t.handlePageChanged},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)],1)},Cr=[],Or=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"filter-row"},[n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"2"}},[n("h1",{staticClass:"headline mb-4 pl-2"},[t._v("Filters:")])]),n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"3"}},[n("v-text-field",{attrs:{label:"Query",dense:"",clearable:""},model:{value:t.filters.query,callback:function(e){t.$set(t.filters,"query",e)},expression:"filters.query"}})],1),n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"2"}},[n("v-select",{attrs:{items:t.organizations,label:"School","item-text":"title","item-value":"value",dense:""},model:{value:t.filters.organization,callback:function(e){t.$set(t.filters,"organization",e)},expression:"filters.organization"}})],1),n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"2"}},[n("v-select",{attrs:{items:t.departments,label:"Department","item-text":"title","item-value":"value",dense:""},model:{value:t.filters.department,callback:function(e){t.$set(t.filters,"department",e)},expression:"filters.department"}})],1),n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"3"}},[n("v-btn",{attrs:{color:"red",icon:"",large:""},on:{click:t.handleReset}},[n("v-icon",[t._v("mdi-close")])],1),n("v-btn",{attrs:{color:"green",icon:"",large:""},on:{click:t.handleSearch}},[n("v-icon",[t._v("mdi-magnify")])],1)],1)],1)},Ar=[],wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e.prototype.handleSearch=function(){this.onSearch(this.filters)},e.prototype.handleReset=function(){this.onReset()},c["c"]([Object(I["b"])(Function)],e.prototype,"onSearch",void 0),c["c"]([Object(I["b"])(Function)],e.prototype,"onReset",void 0),c["c"]([Object(I["b"])(Array)],e.prototype,"organizations",void 0),c["c"]([Object(I["b"])(Array)],e.prototype,"departments",void 0),c["c"]([Object(I["b"])(Object)],e.prototype,"filters",void 0),e=c["c"]([Object(u["default"])({})],e),e}(r["a"]),Dr=wr,xr=Dr,Tr=(n("aaf5"),n("b974")),Er=Object(f["a"])(xr,Or,Ar,!1,null,"181447a3",null),Sr=Er.exports;v()(Er,{VBtn:b["a"],VCol:Fe["a"],VIcon:Zt["a"],VRow:qe["a"],VSelect:Tr["a"],VTextField:We["a"]});var Nr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasDocuments?n("v-row",{staticClass:"mr-2 ml-2"},t._l(t.documents,(function(t,e){return n("div",{key:e,staticClass:"ma-2"},[n("document-card",{attrs:{document:t}})],1)})),0):n("v-row",[n("v-col",[n("h1",{staticClass:"text-center"},[t._v("No documents matched criteria")])])],1)},Ur=[],Pr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),Object.defineProperty(e.prototype,"hasDocuments",{get:function(){return Array.isArray(this.documents)&&this.documents.length},enumerable:!0,configurable:!0}),c["c"]([Object(I["b"])(Array)],e.prototype,"documents",void 0),e=c["c"]([Object(u["default"])({components:{DocumentCard:Ve}})],e),e}(r["a"]),kr=Pr,Ir=kr,jr=Object(f["a"])(Ir,Nr,Ur,!1,null,null,null),Vr=jr.exports;v()(jr,{VCol:Fe["a"],VRow:qe["a"]});var Rr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pagination={page:1,pages:1,total:0},e.paginationTotalVisible=7,e.paginationLength=10,e.filters={query:"",organization:"",department:""},e.organizations=[],e.departments=[],e}return c["d"](e,t),e.prototype.handlePageChanged=function(t){this.fetch()},e.prototype.mounted=function(){this.urlToFilters(),this.fetch()},e.prototype.urlToFilters=function(){this.$route.query.query&&(this.filters.query=this.$route.query.query),this.$route.query.organization&&(this.filters.organization=this.$route.query.organization),this.$route.query.department&&(this.filters.department=this.$route.query.department)},e.prototype.filtersToUrl=function(){var t={};this.filters.query&&(t.query=this.filters.query),this.filters.organization&&(t.organization=this.filters.organization),this.filters.department&&(t.department=this.filters.department);var e=this.$route.query;return(e.query!==t.query||e.organization!==t.organization||e.department!==t.department)&&(this.$router.push({name:"document.search",query:t}),!0)},e.prototype.fetch=function(){return c["b"](this,void 0,void 0,(function(){var t=this;return c["e"](this,(function(e){switch(e.label){case 0:return[4,this.runWithLoading((function(){return c["b"](t,void 0,void 0,(function(){var t,e,n;return c["e"](this,(function(r){switch(r.label){case 0:return[4,this.searchDocuments(this.filters,c["a"]({},this.pagination,{page:(this.pagination.page||1)-1}))];case 1:return t=r.sent().pagination,t.page+=1,Array.isArray(this.documents)&&(e=new Set,n=new Set,this.documents.forEach((function(t){t.organization&&e.add(t.organization),t.department&&n.add(t.department)})),this.organizations=Array.from(e).map((function(t){return{title:t,value:t}})),this.departments=Array.from(n).map((function(t){return{title:t,value:t}}))),this.pagination=c["a"]({},this.pagination,t),[2]}}))}))}))];case 1:return e.sent(),[2]}}))}))},e.prototype.handleSearch=function(t){this.filtersToUrl(),this.fetch()},e.prototype.handleReset=function(){this.filters.query="",this.filters.organization="",this.filters.department=""},c["c"]([Object(k["c"])("documents")],e.prototype,"documents",void 0),c["c"]([Object(k["a"])(ot.SEARCH_DOCUMENTS)],e.prototype,"searchDocuments",void 0),e=c["c"]([Object(u["default"])({components:{SearchFilterPanel:Sr,SearchResultsPanel:Vr}})],e),e}(Object(I["a"])(Vn)),Mr=Rr,Lr=Mr,Fr=(n("73c7"),n("891e")),qr=Object(f["a"])(Lr,_r,Cr,!1,null,"7337731c",null),Br=qr.exports;v()(qr,{VCol:Fe["a"],VContainer:_e["a"],VPagination:Fr["a"],VRow:qe["a"]});var Hr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"user=purchases white pa-4 align-start",attrs:{"fill-height":"",fluid:""}},[n("v-expansion-panels",{attrs:{multiple:""},model:{value:t.panels,callback:function(e){t.panels=e},expression:"panels"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("h3",{staticClass:"font-weight-light"},[t._v("Available documents")])]),n("v-expansion-panel-content",[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Document")]),n("th",{staticClass:"text-left"},[t._v("Purchased at")]),n("th",{staticClass:"text-left"},[t._v("Valid until")]),n("th",{staticClass:"text-left"},[t._v("Download")])])]),n("tbody",[t.current.length?t._l(t.current,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.document.title))]),n("td",[t._v(t._s(e.purchased_at))]),n("td",[t._v(t._s(e.valid_until))]),n("td",[e.download_url?n("v-btn",{attrs:{href:e.download_url,icon:""}},[n("v-icon",[t._v("mdi-download")])],1):t._e()],1)])})):n("tr",[n("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("No documents loaded")])])],2)]},proxy:!0}])})],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[n("h3",{staticClass:"font-weight-light"},[t._v("Past (expired) documents")])]),n("v-expansion-panel-content",[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Document")]),n("th",{staticClass:"text-left"},[t._v("Organization")]),n("th",{staticClass:"text-left"},[t._v("Department")]),n("th",{staticClass:"text-left"},[t._v("Purchased at")]),n("th",{staticClass:"text-left"},[t._v("Valid until")])])]),n("tbody",[t.past.length?t._l(t.past,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.document.title))]),n("td",[t._v(t._s(e.document.organization))]),n("td",[t._v(t._s(e.document.department))]),n("td",[t._v(t._s(e.purchased_at))]),n("td",[t._v(t._s(e.valid_until))])])})):n("tr",[n("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("No documents loaded")])])],2)]},proxy:!0}])})],1)],1)],1)],1)},zr=[],Gr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userDocuments=null,e.panels=[0],e}return c["d"](e,t),e.prototype.mounted=function(){this.fetch()},e.prototype.fetch=function(){return c["b"](this,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return t=this,[4,this.getUserDocuments()];case 1:return t.userDocuments=e.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"current",{get:function(){return this.userDocuments&&this.userDocuments.current?this.userDocuments.current:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"past",{get:function(){return this.userDocuments&&this.userDocuments.past?this.userDocuments.past:[]},enumerable:!0,configurable:!0}),c["c"]([Object(k["a"])(ot.GET_USER_DOCUMENTS)],e.prototype,"getUserDocuments",void 0),e=c["c"]([Object(u["default"])({})],e),e}(Object(I["a"])(Vn)),Yr=Gr,Wr=Yr,Kr=n("cd55"),Jr=n("49e2"),Qr=n("c865"),$r=n("0393"),Zr=n("1f4f"),Xr=Object(f["a"])(Wr,Hr,zr,!1,null,null,null),ta=Xr.exports;v()(Xr,{VBtn:b["a"],VContainer:_e["a"],VExpansionPanel:Kr["a"],VExpansionPanelContent:Jr["a"],VExpansionPanelHeader:Qr["a"],VExpansionPanels:$r["a"],VIcon:Zt["a"],VSimpleTable:Zr["a"]});var ea=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height white list--users",attrs:{fluid:""}},[n("v-data-table",{staticClass:"elevation-1 fill-height flex-grow-1",attrs:{headers:t.headers,items:t.users},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("Users")]),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),n("v-spacer"),n("v-btn",{attrs:{small:"",outlined:"",color:"secondary",dark:""},on:{click:t.fetch}},[t._v("Refresh")]),n("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t.editUser?n("v-card-text",[n("v-container",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Name"},model:{value:t.editUser.name,callback:function(e){t.$set(t.editUser,"name",e)},expression:"editUser.name"}})],1),n("v-col",[n("v-text-field",{attrs:{type:"password",label:"Password",placeholder:"********"},model:{value:t.editUser.password,callback:function(e){t.$set(t.editUser,"password",e)},expression:"editUser.password"}})],1)],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Name"},model:{value:t.editUser.email,callback:function(e){t.$set(t.editUser,"email",e)},expression:"editUser.email"}})],1),n("v-col",[n("v-text-field",{attrs:{type:"password",label:"Password confirmation",placeholder:"********"},model:{value:t.editUser.confirmation,callback:function(e){t.$set(t.editUser,"confirmation",e)},expression:"editUser.confirmation"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{items:t.roles,label:"Role","item-text":"title","item-value":"value",dense:""},model:{value:t.editUser.role,callback:function(e){t.$set(t.editUser,"role",e)},expression:"editUser.role"}})],1),n("v-col",[n("v-switch",{attrs:{label:"Activated"},model:{value:t.editUser.active,callback:function(e){t.$set(t.editUser,"active",e)},expression:"editUser.active"}})],1)],1)],1)],1):t._e(),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.handleSave}},[t._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.activatedAt",fn:function(e){var r=e.item;return[r.active?n("span",[t._v(t._s(r.activatedAt))]):n("span",{staticClass:"red--text lighten-3"},[t._v("-- inactive --")])]}},{key:"no-data",fn:function(){return[t._v(" Loading data... ")]},proxy:!0}])})],1)},na=[],ra=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pagination={page:0},e.defaultHeader={text:"",sortable:!1,filterable:!1},e.headers=[c["a"]({},e.defaultHeader,{text:"ID",value:"id"}),c["a"]({},e.defaultHeader,{text:"Email",value:"email"}),c["a"]({},e.defaultHeader,{text:"Name",value:"name"}),c["a"]({},e.defaultHeader,{text:"Activated at",value:"activatedAt"}),c["a"]({},e.defaultHeader,{text:"Role",value:"role"}),c["a"]({},e.defaultHeader,{value:"actions"})],e.dialog=!1,e.editUser=null,e}return c["d"](e,t),Object.defineProperty(e.prototype,"formTitle",{get:function(){return"Edit user"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roles",{get:function(){return[{title:"User",value:"user"},{title:"Admin",value:"admin"}]},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.fetch()},e.prototype.handleDialogChange=function(t,e){var n=this;"undefined"!==typeof e&&(t||this.$nextTick((function(){n.editUser=null})))},e.prototype.fetch=function(){this.loadUsers({})},e.prototype.handleSave=function(){return c["b"](this,void 0,void 0,(function(){var t,e=this;return c["e"](this,(function(n){switch(n.label){case 0:if(t=this.editUser,!t)return[2];if(t.password||t.confirmation){if(t.password&&t.password.length<6)return alert("Password must be at least 6 characters long"),[2];if(t.confirmation!==t.password)return alert("Password and confirmation must match"),[2]}return[4,this.runWithLoading((function(){return c["b"](e,void 0,void 0,(function(){var e,n=this;return c["e"](this,(function(r){switch(r.label){case 0:return[4,this.runWithLoading((function(){return n.updateUser({user:t})}))];case 1:return e=r.sent(),e&&(this.dialog=!1,this.loadUsers({})),[2]}}))}))}))];case 1:return n.sent(),[2]}}))}))},c["c"]([Object(k["c"])("users")],e.prototype,"users",void 0),c["c"]([Object(k["a"])(ot.ADMIN_UPDATE_USER)],e.prototype,"updateUser",void 0),c["c"]([Object(k["a"])(ot.ADMIN_DELETE_USER)],e.prototype,"deleteUser",void 0),c["c"]([Object(k["a"])(ot.ADMIN_LOAD_USERS)],e.prototype,"loadUsers",void 0),c["c"]([Object(I["c"])("dialog",{immediate:!0})],e.prototype,"handleDialogChange",null),e=c["c"]([Object(u["default"])({})],e),e}(Object(I["a"])(Vn)),aa=ra,oa=aa,ia=n("8fea"),sa=n("b73d"),ca=n("71d9"),ua=Object(f["a"])(oa,ea,na,!1,null,null,null),la=ua.exports;v()(ua,{VBtn:b["a"],VCard:ke["a"],VCardActions:Ie["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VCol:Fe["a"],VContainer:_e["a"],VDataTable:ia["a"],VDialog:ur["a"],VDivider:$t["a"],VRow:qe["a"],VSelect:Tr["a"],VSpacer:y["a"],VSwitch:sa["a"],VTextField:We["a"],VToolbar:ca["a"],VToolbarTitle:pe["a"]});var da=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height white list-documents",attrs:{fluid:""}},[n("v-data-table",{staticClass:"elevation-1 fill-height flex-grow-1",attrs:{headers:t.headers,items:t.documents},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("Documents")]),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),n("v-spacer"),n("v-btn",{attrs:{small:"",outlined:"",color:"secondary",dark:""},on:{click:t.handleCreate}},[t._v("New Item")]),n("v-btn",{attrs:{small:"",outlined:"",color:"secondary",dark:""},on:{click:t.fetch}},[t._v("Refresh")]),n("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t.currentDocument?n("v-card-text",[n("v-container",[n("v-row",[n("v-col",[t.currentDocument.id?n("v-text-field",{attrs:{disabled:"",label:"Uploaded document URL",value:t.currentDocument.url}}):n("v-file-input",{attrs:{dense:"",chips:"","show-size":"",label:"Document to upload",accept:"application/pdf"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{dense:"",label:"Title *",required:""},model:{value:t.currentDocument.title,callback:function(e){t.$set(t.currentDocument,"title",e)},expression:"currentDocument.title"}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{dense:"",label:"Organization"},model:{value:t.currentDocument.organization,callback:function(e){t.$set(t.currentDocument,"organization",e)},expression:"currentDocument.organization"}})],1),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{dense:"",label:"Department"},model:{value:t.currentDocument.department,callback:function(e){t.$set(t.currentDocument,"department",e)},expression:"currentDocument.department"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{dense:"",label:"Description"},model:{value:t.currentDocument.description,callback:function(e){t.$set(t.currentDocument,"description",e)},expression:"currentDocument.description"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{dense:"",label:"Parsed file text excerpts (about first page)",disabled:!t.currentDocument.id},model:{value:t.currentDocument.text,callback:function(e){t.$set(t.currentDocument,"text",e)},expression:"currentDocument.text"}})],1)],1)],1)],1):t._e(),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.handleSave}},[t._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var r=e.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.handleEdit(r)}}},[t._v(" mdi-pencil ")]),n("v-icon",{attrs:{small:""},on:{click:function(e){return t.handleDelete(r)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t._v(" Loading data... ")]},proxy:!0}])})],1)},pa=[],ma=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pagination={page:0},e.defaultHeader={text:"",sortable:!1,filterable:!1},e.headers=[c["a"]({},e.defaultHeader,{text:"ID",value:"id"}),c["a"]({},e.defaultHeader,{text:"Title",value:"title"}),c["a"]({},e.defaultHeader,{text:"Organization",value:"organization"}),c["a"]({},e.defaultHeader,{text:"Department",value:"department"}),c["a"]({},e.defaultHeader,{text:"Description",value:"description"}),c["a"]({},e.defaultHeader,{value:"actions"})],e.dialog=!1,e.file=null,e.currentDocument=null,e}return c["d"](e,t),Object.defineProperty(e.prototype,"formTitle",{get:function(){return this.currentDocument&&this.currentDocument.id?"Edit document":"Create document"},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.fetch()},e.prototype.handleDialogChange=function(t,e){var n=this;"undefined"!==typeof e&&(t||this.$nextTick((function(){n.currentDocument=null,n.file=null})))},e.prototype.handleFileChange=function(t){this.currentDocument&&(this.currentDocument.title||(this.currentDocument.title=t.name))},e.prototype.fetch=function(){this.loadDocuments({})},e.prototype.handleEdit=function(t){this.currentDocument=t,this.dialog=!0},e.prototype.handleCreate=function(){this.handleEdit(It())},e.prototype.handleSave=function(){return c["b"](this,void 0,void 0,(function(){var t,e=this;return c["e"](this,(function(n){switch(n.label){case 0:return t=this.currentDocument,t?[4,this.runWithLoading((function(){return c["b"](e,void 0,void 0,(function(){var e,n;return c["e"](this,(function(r){switch(r.label){case 0:return t.id?[4,this.updateDocument({document:t})]:[3,2];case 1:return n=r.sent(),[3,4];case 2:return[4,this.createDocument(c["a"]({},t,{file:this.file}))];case 3:n=r.sent(),r.label=4;case 4:return e=n,e&&(this.dialog=!1,this.loadDocuments({})),[2]}}))}))}))]:[2];case 1:return n.sent(),[2]}}))}))},e.prototype.handleDelete=function(t){return c["b"](this,void 0,void 0,(function(){var e=this;return c["e"](this,(function(n){switch(n.label){case 0:return confirm("Do you really want to delete document? This action cannot be reverted.")?[4,this.runWithLoading((function(){return e.deleteDocument(t)}))]:[2];case 1:return n.sent(),[2]}}))}))},c["c"]([Object(k["c"])("documents")],e.prototype,"documents",void 0),c["c"]([Object(k["a"])(ot.ADMIN_CREATE_DOCUMENT)],e.prototype,"createDocument",void 0),c["c"]([Object(k["a"])(ot.ADMIN_UPDATE_DOCUMENT)],e.prototype,"updateDocument",void 0),c["c"]([Object(k["a"])(ot.ADMIN_DELETE_DOCUMENT)],e.prototype,"deleteDocument",void 0),c["c"]([Object(k["a"])(ot.LOAD_DOCUMENTS)],e.prototype,"loadDocuments",void 0),c["c"]([Object(I["c"])("dialog",{immediate:!0})],e.prototype,"handleDialogChange",null),c["c"]([Object(I["c"])("file",{immediate:!0})],e.prototype,"handleFileChange",null),e=c["c"]([Object(u["default"])({})],e),e}(Object(I["a"])(Vn)),fa=ma,ha=fa,va=n("23a7"),ba=n("a844"),ga=Object(f["a"])(ha,da,pa,!1,null,null,null),ya=ga.exports;v()(ga,{VBtn:b["a"],VCard:ke["a"],VCardActions:Ie["a"],VCardText:Ie["c"],VCardTitle:Ie["d"],VCol:Fe["a"],VContainer:_e["a"],VDataTable:ia["a"],VDialog:ur["a"],VDivider:$t["a"],VFileInput:va["a"],VIcon:Zt["a"],VRow:qe["a"],VSpacer:y["a"],VTextField:We["a"],VTextarea:ba["a"],VToolbar:ca["a"],VToolbarTitle:pe["a"]});var _a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",[t._v(" Not found! ")])},Ca=[],Oa={},Aa=Object(f["a"])(Oa,_a,Ca,!1,null,null,null),wa=Aa.exports;v()(Aa,{VContent:de["a"]});var Da=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("iframe",{attrs:{src:"https://docs.google.com/forms/d/e/1FAIpQLSfBwYMR77wd3DRli7D-n3s0iY2N7XRQPTFheK2PIt3Hdo4nHw/viewform?embedded=true",width:"100%",height:"812",frameborder:"0",marginheight:"0",marginwidth:"0"}},[t._v("Loadingâ¦")])},xa=[],Ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e=c["c"]([Object(u["default"])({components:{}})],e),e}(r["a"]),Ea=Ta,Sa=Ea,Na=Object(f["a"])(Sa,Da,xa,!1,null,null,null),Ua=Na.exports,Pa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"10"}},[n("div",{staticClass:"display-2 mb-8"},[t._v("Privacy policy")]),n("p",[t._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sit amet purus justo. Nullam bibendum odio dignissim, tempus ante eget, maximus risus. Maecenas massa risus, suscipit et enim ac, imperdiet fringilla tortor. Duis at dapibus turpis, sed suscipit dolor. Duis nisi odio, consequat eget viverra sed, sollicitudin eu elit. Nunc ut mauris eu tellus pretium consectetur non sit amet risus. Maecenas vel nulla et dui vestibulum aliquam. ")]),n("p",[t._v(" Sed mollis arcu eu libero imperdiet suscipit. Praesent imperdiet consectetur imperdiet. Nam odio neque, faucibus sit amet eros ut, commodo aliquam purus. Vestibulum laoreet, tortor id mollis aliquet, lacus eros molestie arcu, ut lobortis ante ligula quis ex. Nulla facilisi. Fusce posuere ante nec risus ullamcorper, nec fermentum augue aliquet. Vestibulum a turpis porta, hendrerit ipsum vitae, ultrices nisi. Nam vel lectus ac nulla sagittis convallis eget quis augue. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam tortor urna, aliquet non diam et, gravida feugiat ligula. Fusce sapien justo, rutrum at iaculis at, hendrerit ac turpis. Morbi consectetur, libero et semper accumsan, enim orci feugiat libero, in sagittis dolor magna non metus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. ")]),n("p",[t._v(" Nulla facilisi. Cras vitae ullamcorper nunc. Nunc congue sem sed purus volutpat sodales. Mauris in est et eros euismod bibendum. Sed nec sollicitudin libero, rutrum fermentum diam. Pellentesque placerat eros ex, sed aliquet lectus ultricies tempor. Aliquam rhoncus quam magna, a fermentum est posuere nec. ")]),n("p",[t._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce velit justo, elementum non finibus et, maximus vel justo. Nullam sit amet urna mi. In ultrices venenatis odio, quis lobortis nibh mattis sed. Morbi aliquam blandit enim, a faucibus tortor blandit vitae. Aenean at turpis nulla. Pellentesque ligula erat, tincidunt nec accumsan ut, lobortis facilisis arcu. Aliquam erat volutpat. ")]),n("p",[t._v(" Sed et ante nec dui malesuada mollis. Nullam diam libero, laoreet at molestie condimentum, pharetra non dolor. Fusce rutrum sollicitudin malesuada. Aliquam convallis lectus et ullamcorper ullamcorper. Sed at sem id leo elementum efficitur ac ut felis. Sed vitae lorem sit amet magna sodales convallis sit amet fringilla nulla. Vestibulum eu laoreet ligula. Cras mi leo, condimentum vel iaculis nec, pharetra vel enim. Praesent ac odio non purus condimentum semper vel id velit. Nulla varius nibh nec diam sagittis, vitae mattis sem tincidunt. Nam nec vestibulum leo. Integer dapibus odio diam, eu pharetra quam vestibulum ac. Duis non euismod quam, nec tristique purus. Integer sed ante non sem congue vestibulum. Fusce ligula odio, rutrum vel rutrum non, auctor ac eros. Cras malesuada elit eu erat efficitur, sed lobortis orci hendrerit. ")])])],1)},ka=[],Ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e=c["c"]([Object(u["default"])({})],e),e}(r["a"]),ja=Ia,Va=ja,Ra=Object(f["a"])(Va,Pa,ka,!1,null,null,null),Ma=Ra.exports;v()(Ra,{VCol:Fe["a"],VRow:qe["a"]}),r["a"].use(Ht["a"]);var La={home:"home",contact:"contact",privacyPolicy:"privacy_policy",account:{login:"account.login",register:"account.register",forgotPassword:"account.forgot_password",resetPassword:"account.reset_password",profile:"account.profile"},documents:{search:"document.search",document:"document.document",purchases:"document.purchases"},admin:{listUsers:"admin.list_users",listDocuments:"admin.list_documents"}},Fa=[{path:"/",redirect:"/home",component:fe,props:!0,children:[{path:"home",name:La.home,component:Je,meta:{title:"Sailshift :: Home"}}]},{path:"/contact",name:La.contact,component:Ua,meta:{title:"Sailshift :: Contact us"}},{path:"/privacy_policy",name:La.privacyPolicy,component:Ma,meta:{title:"Sailshift :: Privacy Policy"}},{path:"/account",component:Oe,children:[{path:"login",name:La.account.login,component:rn,meta:{title:"Sailshift :: Login"}},{path:"register",name:La.account.register,component:dn,meta:{title:"Sailshift :: Register"}},{path:"forgot_password",name:La.account.forgotPassword,component:gn,meta:{title:"Sailshift :: Forgot password"}},{path:"reset_password/:token",name:La.account.resetPassword,component:Dn,props:!0,meta:{title:"Sailshift :: Reset password"}}]},{path:"/document",redirect:"/home",component:fe,children:[{path:"search",name:La.documents.search,component:Br,props:!0,meta:{title:"Sailshift :: Search"}},{path:"purchases",name:La.documents.purchases,component:ta,props:!0,meta:{title:"Sailshift :: My purchases"}},{path:":documentId",name:La.documents.document,component:yr,props:!0,meta:{title:"Sailshift :: Document Preview"}}]},{path:"/admin",component:fe,children:[{path:"list_users",name:La.admin.listUsers,component:la,props:!0,meta:{title:"Sailshift :: Users"}},{path:"list_documents",name:La.admin.listDocuments,component:ya,props:!0,meta:{title:"Sailshift :: Documents"}}]},{path:"*",component:wa}],qa={userRoutes:[La.documents.purchases],adminOnlyRoutes:[La.admin.listUsers,La.admin.listDocuments]},Ba=new Ht["a"]({mode:"history",base:"/",routes:Fa});Ba.beforeEach((function(t,e,n){if(qa.adminOnlyRoutes.includes(t.name)){if(!kt.getters.isLoggedOn||!kt.getters.isAdmin)return n({name:La.account.login})}else if(qa.userRoutes.includes(t.name)&&!kt.getters.isLoggedOn&&t.name!==La.account.login)return n({name:La.account.login});document.title=t.meta.title,n()}));var Ha=Ba,za=n("f309");n("5363"),n("d1e7");r["a"].use(za["a"]);var Ga=new za["a"]({icons:{iconfont:"mdi"},theme:{dark:!1}}),Ya=n("a925");n("8f4c"),n("98f5");r["a"].use(Ya["a"]);var Wa={en:{"Some string used somewhere":"Tests"},ru:{"Some string used somewhere":"ÐÐ°ÐºÐ°Ñ-ÑÐ¾ ÑÑÑÐ¾ÐºÐ° Ð¸ÑÐ¿Ð¾Ð»ÑÐ·ÑÐµÐ¼Ð°Ñ Ð³Ð´Ðµ-ÑÐ¾"}},Ka=new Ya["a"]({locale:"ru",fallbackLocale:"en",messages:Wa}),Ja=n("58ca");r["a"].use(Ja["a"],{});n("d5e8"),n("953f");r["a"].config.productionTip=!1,o.a.defaults.baseURL=Object({VUE_APP_STRIPE_API_PUBLISHABLE_KEY:"pk_test_hNvUnzfcexW7qmN3MEruc1z500r9xWacbZ",NODE_ENV:"production",BASE_URL:"/"}).API_BASE_URL||"http://localhost:8081/",r["a"].config.errorHandler=function(t,e,n){console.error("Vue error:"),console.error("err:",t),console.error("vm:",e),console.error("info:",n)},new r["a"]({router:Ha,store:kt,vuetify:Ga,i18n:Ka,render:function(t){return t(qt)}}).$mount("#root")},d2d3:function(t,e,n){"use strict";var r=n("fe7a"),a=n.n(r);a.a},f47b:function(t,e,n){"use strict";var r=n("07d4"),a=n.n(r);a.a},fce7:function(t,e){},fe7a:function(t,e,n){}});
//# sourceMappingURL=app.ec0411ea.js.map