(function(t){function e(e){for(var r,i,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"31b7":function(t,e,n){},"3add":function(t,e,n){"use strict";var r=n("31b7"),a=n.n(r);a.a},"3b79":function(t,e,n){"use strict";var r=n("d574"),a=n.n(r);a.a},4059:function(t,e,n){"use strict";var r=n("edae"),a=n.n(r);a.a},"4ffd":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABACAYAAABFqxrgAAAABHNCSVQICAgIfAhkiAAAA9FJREFUeF7tWs1LG0EUf/n+EENQsVK8pNReBC1CLiKCBwURQ/TgQejVgqL/gdCbR71ZvEUQighBRDwUIQfxIlhBBC9S6EG9VIKV1JiP7Txt0p2dWZNZm9bVt7CweW/ec+Y37zfr/HYcAKCx+1lfzmc9+t+DJxAYEG67VsLU1BTE43Hwer1KQ0ilUjA3NwfX19dcHK4JtrpjsZj2kGt2dpYbry3pMDAwoDT7xsbt7e2cyZYgGAel+tvhcBAIRtCeZSUQCEYE2G+qBALhriyoEqgSqBLKSyTRgehgYzpcXl6WS9nKQ7FY5MJsSYe1tTW4urqyMn4oFAqwsbHBxeJOwpbyWldXF3R3d4PTWf08su037O/vw+7uLuBz6bItCJbKwCSoehhNEjwFM4HAZrHmGiMKGCMjIzA8PAxud/V/Djm7vb0NiURCWmyYc2hoCHw+n9RvZsT1YHFxUXDXVF9kg9ey2axlSXBsbEzoX29vr+V8GDg5OflvNcaenh5lRVg/TePj48KsjY6OCjYVAwORa/7o1wSXyyWMT4VWQjAzkMYoQeXRV4Kkz3/dRCAwSAkEAuGOWVQJVAlUCeW3DNGB6GATOrDNV7lsSw8ym9DoHoNeVcJmNacDHo9BXc/qtbKyIoQmk0m4ubkR7NUadnZ2uKY1l9dws9LX1weDg4PKeuDe3h6srq5yeiD2HnP29/ff3ioaI8YeHh7eahSkMRpKpuZ0qLZE/2c7AoGhLxX9ULTweDxKk5PL5SCfz0tjkMN+v1/qu8+IZw2NK7m+PeY0CiT35UMfvlmMX6DQzult09PTGhuMsobHPo1pMzMzgh7Y3Nysra+vK+fDgOPjYy0cDgs5Q2639qk1on1vfa18p1pfaS8DQS4nalcfSuiFQiHY3Ny0NGuo+nZ0dMDS0hL3+pqYmAAGTqUJkvqbmpqgrq4Otra2OP+7cCO89wSkMZWML8ABPpcTPmf+fMbj1oS2tjaor6+vlMfUz2YNAgG+cy0tLabtq3FEIhGh2RunlMVCOzNDo4c/CkwLI0OKQCAQ7ghDlUCVQJVQfnkQHYgORAeiQxkBooOEDqenp3qAlJ9xO423/spkMsp59AEnJydC/FfgD2MKDSoYfhZ5zZN7O5ydncHCwoJlYXR+fh7S6TTXheXlZTg6OqrQLbn7/Pxcer4omb6AbxaBuHA64OMPvo+C0IoiRWdnJzQ0NMh7ZmLFKmL7f6k3GAxCNBoF2akTaQAzopp8cHBgenLVx4Sft14/eHWHMs1ylexYP19yWcgYxB8BhEqJnqKf/llis0ogMBB+ASWBkTTfhPTnAAAAAElFTkSuQmCC"},"673c":function(t,e,n){},"7c82":function(t,e,n){"use strict";var r=n("98ec"),a=n.n(r);a.a},"8f4c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAAAAXNSR0IArs4c6QAAAK9JREFUSA1j3LjviPrtOw/3f/v+Q5KBjoCLk+O5qoq8I7OJtfNlelsO8ufvP394P3/+GswCs7w4PY6O/mdg6J25iAFkNxNdbcVi2agDRkOApX7GIwYWVjaGvY9fYkkitBM6tPUR2PDRKBgNgdEQGPAQYFwuwPAflCGtZSRol+mxmHz0yQuw6ICHwKgDRkMAlAsuA5OjDpaESg+h80z/fzO4MDIyXKOHbWh2nAfa7QkAi+Qyh6bRqT0AAAAASUVORK5CYII="},"96b6":function(t,e,n){"use strict";var r=n("ad1b"),a=n.n(r);a.a},"98ec":function(t,e,n){},"98f5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAYCAYAAACbU/80AAAAAXNSR0IArs4c6QAABURJREFUSA3NVgtMFEcY/nZvkZO7E6j4OOypiFBNfCSKnNhqYxpjImpKT7TV2moxbWzri2qsMRRLBWOrNoCPGMVaa7WIJhqlitCXDVUM1sZSsURFLfaOhz04jrvjbnenO3Pu9ogPQprYTjI7//zzP2b+2fm/n5uDlJwxuLLeiA4eSnPnF9EBxXuA32paGB36ycmPYVPjioxQtqb3wYp/dCIiBLy/KaqLnKrnhkG+gjG5fKjzUMmz5XNhsZhCWT2idToOhw7PfqQOPTD1zW0DCJVaPHEUuP4DYcjKhZCUzBSdrSLmzbsJV5ukGSovT4TJpEPjyJGQ29oYn4+MxIDaWrS3S5g2rY7xCgotmJBkAMdxkJub4NmYBfHiT5qdzy7UBHVVjiwTSA47XO9mwFOwBcTvR3SUgKMl8Rg7trcq1u2o1/PYv38okicYmXP/d+Vom58G/4VKUB8ypwOfvlCzw+XkF7EIrCCt8BcfAAJ+tigkPANjzmYIwxMhSQTHjjmxbVsjHhcBr1eG0ykiNrYXSIcb7i156Dx1XHOms05G+PK14AcPVTYj4cSJ6xDU1V5vrYQw0wZf4ccQz30D/7VaOBemw/DOKkQseB02WzRiYgTwPKeqaCNnNDKanp46D/xyCa6stZDuNjA+PyQOesWxkDKFzS9f9mDTpjKcPHmDzjeT6dOPkMrKduL1Sqy3//AjaUybQexjE1i/9+ZrRHTYSSAgEyWMrDlGjCB/ms2sNyYnB5nKoit/C7GPG8H0HM+OI61Fe4nX5WN26+t9pLCwkVitV5Wob2adPb2ysnpkZv6BXbua0dAQgJA8CX2+OA595noQgwne85VosqUiUFGq3Cs7xEM/UkszXHt3QRYlhM2ywXTkDMLnLwbCwlBa2oaMjFs4ePBeF13tH8ha/kaXhe4moa9AZ7Ggf1VVdypd1j8q2MfmLAJdVp7wRMsDL5vNT9T1V3b7/yMC//kVaHmAptOeNNnlUpI4y2FQkgN4Uw9x4/4VCCr6Dfg3r2DQoB6/Avf9V6BFgAIJbYLAITycD753IoN4PCBK2uR6hYPX6x8bJCIGIHu8TIbvreCHEMZoUSTw+eSH6goqfpceqsOaNQORmhoJv19Ge1kp7KuXgRod/Ol2RL+YxgzQoD8qF3GKw0DzbdQvehW+ujo8tWQp+q/LBicIqK72YOtWB1paRGanqipYN7Cf0Gw2KLn5aeZcybdwbFiHO0sWgo+MQsKpMuacXvftOz54Oh5+EvV4+vjhSDxdgT4zUtGyezvqbTMQUDAhJcWAHTuGKGMQN1R5UDSkneKA6/pt8uvU50lVtJFcS08jAaeT5XhRksnXZ5xkypRa4nKJD2LB+PGM19omEl+nxGhZwYW7Wz8hF2P6kEtxFtJ06rSGNSUlfzEcoHigPUPX2dP4/YVJcP9cDfOq95B4uARCVBQ6A7ISHTs+zLajs/P+X69tP0iQjg5GUKBcvOgWaCFDC5HYzNVIOHxUgV4ZNxbMgX1jtnKlEmbOjERx8Wz06xcBLRNaTb2hMxowfHcR+s4KllLKifD20ju4ebNTc/m4ekCtiCIieOTmxcJqNYJXNuK7VY9rr8yFp6YGRmsK4vYcwN5hluCmVcvh8fEY/e055lyJIS5Wu/FS2o0uzlXZ7kaPR8aqlQ3YubMJoihDPzQOoyu+R19bOlwKsl6dOlEzweXAIKkVMeUuC0jI3lCJvNzzmlAo0ZOqmOolJQ1EecU8FH7+JTOjVsV04oZJ4mlp3KGUyGxV+Tw3+dAjnasyPRmrqx0YFrf7ARXq/ApG5f0NP6GR+RiBCV0AAAAASUVORK5CYII="},"9cb3":function(t,e,n){},a20a:function(t,e,n){"use strict";var r=n("9cb3"),a=n.n(r);a.a},aaf5:function(t,e,n){"use strict";var r=n("abf6"),a=n.n(r);a.a},abf6:function(t,e,n){},ac53:function(t,e,n){"use strict";var r=n("673c"),a=n.n(r);a.a},ad1b:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),a=n("bc3a"),o=n.n(a),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view"),t.notification?n("v-snackbar",{attrs:{top:"","multi-line":"",color:t.color},model:{value:t.notification,callback:function(e){t.notification=e},expression:"notification"}},[t._v(" "+t._s(t.notification.message)+" "),n("v-btn",{attrs:{color:t.notification.type,text:""},on:{click:function(e){return t.setNotification(null)}}},[t._v("Close")])],1):t._e(),n("loader"),n("app-footer")],1)},s=[],c=n("9ab4"),l=n("2fe1"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{color:"indigo",app:""}},[n("span",{staticClass:"white--text"},[t._v("Â© 2019")])])},d=[],p=r["a"].extend({name:"Footer"}),m=p,f=n("2877"),v=n("6544"),h=n.n(v),b=n("553a"),y=Object(f["a"])(m,u,d,!1,null,null,null),g=y.exports;h()(y,{VFooter:b["a"]});var _=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-overlay",{attrs:{value:t.loading,"z-index":"999"}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},O=[],C=n("2f62"),A=r["a"].extend({computed:Object(C["e"])({loading:"loading"})}),D=A,w=n("a797"),x=n("490a"),T=Object(f["a"])(D,_,O,!1,null,null,null),E=T.exports;h()(T,{VOverlay:w["a"],VProgressCircular:x["a"]});var S,N,U=n("4bb5"),k=n("60a3"),P=n("0e44"),j=void 0,V=o.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_API_BASE_URL||""}),I=function(){delete V.defaults.headers.common.Authorization},R=function(t){if(!t)return I();V.defaults.headers.common.Authorization="Bearer "+t},M=function(t,e){return V.post("/api/accounts/login",{email:t,password:e})},L=function(t,e,n){return V.post("/api/contact",{email:t,subject:e,message:n})},F=function(t){return V.post("/api/accounts/forgot_password",{email:t})},q=function(t,e,n){return V.post("/api/accounts/register",{email:t,password:e,confirmation:n})},B=function(t,e,n){return c["b"](j,void 0,void 0,(function(){return c["e"](this,(function(r){return[2,V.post("/api/accounts/reset_password",{token:t,password:e,confirmation:n})]}))}))},H=function(t){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,V.get("/api/documents/",{params:t})]}))}))},G=function(){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(t){return[2,V.get("/api/documents/my")]}))}))},z=function(t,e){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(n){return[2,V.post("/api/documents/search",c["a"]({},e,t))]}))}))},Y=function(t){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,V.get("/api/accounts/users",{params:t})]}))}))},K=function(t){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,V.get("/api/purchases/",{params:t})]}))}))},J=function(){return c["b"](j,void 0,void 0,(function(){return c["e"](this,(function(t){return[2,V.get("/api/documents/popular")]}))}))},W=function(t){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,V.get("/api/documents/"+t)]}))}))},Q=function(t){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,V.post("/api/payments/prepay",t)]}))}))},$=function(t){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,V.get("/api/payments/check/"+t)]}))}))},Z=function(t,e,n,r){return c["b"](j,void 0,void 0,(function(){var a;return c["e"](this,(function(o){return a=new FormData,a.append("title",t),a.append("organization",e),n&&a.append("description",n),a.append("file",r),[2,V.post("/api/documents/admin/upload",a,{headers:{"Content-Type":"multipart/form-data"}})]}))}))},X=function(t){return c["b"](j,void 0,void 0,(function(){return c["e"](this,(function(e){return[2,V.delete("/api/documents/admin/"+t)]}))}))},tt=function(t){return c["b"](j,void 0,void 0,(function(){return c["e"](this,(function(e){return[2,V.put("/api/documents/admin/"+t.id,t)]}))}))},et=function(t){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,V.delete("/api/accounts/"+t)]}))}))},nt=function(t){return c["b"](j,void 0,Promise,(function(){return c["e"](this,(function(e){return[2,V.put("/api/accounts/"+t.id,t)]}))}))},rt={NOTIFICATION:"notification",CONTACT:"contact",LOGIN:"login",FORGOT_PASSWORD:"forgot_password",REGISTER:"register",RESET_PASSWORD:"reset_password",LOAD_DOCUMENTS:"LOAD_DOCUMENTS",LOAD_DOCUMENT:"LOAD_DOCUMENT",SEARCH_DOCUMENTS:"SEARCH_DOCUMENTS",ADMIN_CREATE_DOCUMENT:"ADMIN_CREATE_DOCUMENT",ADMIN_UPDATE_DOCUMENT:"ADMIN_UPDATE_DOCUMENT",ADMIN_DELETE_DOCUMENT:"ADMIN_DELETE_DOCUMENT",ADMIN_LOAD_USERS:"ADMIN_LOAD_USERS",ADMIN_UPDATE_USER:"ADMIN_UPDATE_USER",ADMIN_DELETE_USER:"ADMIN_DELETE_USER",ADMIN_LOAD_PURCHASES:"ADMIN_LOAD_PURCHASES",DOCUMENTS_LOAD_POPULAR:"DOCUMENTS_LOAD_POPULAR",PRE_PURCHASE_DOCUMENT:"PRE_PURCHASE_DOCUMENT",CHECK_PURCHASE_DOCUMENT:"CHECK_PURCHASE_DOCUMENT",GET_USER_DOCUMENTS:"GET_USER_DOCUMENTS"},at={LOADING:"LOADING",NOTIFICATION:"NOTIFICATION",LOGIN:"LOGIN",LOGOUT:"LOGOUT",USER:"USER",TOKEN:"TOKEN",DOCUMENTS:"DOCUMENTS",CURRENT_DOCUMENT:"CURRENT_DOCUMENT",POPULAR_DOCUMENTS:"POPULAR_DOCUMENTS",PURCHASES:"PURCHASES",CURRENT_PURCHASE:"CURRENT_PURCHASE",USERS:"USERS"},ot={fromBackend:function(t){return{id:t.id,email:t.email,name:t.name,activatedAt:t.activated_at,active:!!t.active,role:t.role}},toBackend:function(t){var e={id:t.id,email:t.email,name:t.name,activated_at:t.activatedAt,active:!!t.active,role:t.role};return t.password&&(e.password=t.password),t.confirmation&&(e.confirmation=t.confirmation),e}},it={fromBackend:function(t){return{id:t.id,purchasedAt:t.purchased_at,validUntil:t.valid_until,downloadUrl:t.download_url,documentId:t.document_id,userId:t.user_id,paymentStatus:t.payment_status}},toBackend:function(t){return{id:t.id,purchased_at:t.purchasedAt,valid_until:t.validUntil,download_url:t.downloadUrl,document_id:t.documentId,user_id:t.userId,payment_status:t.paymentStatus}}},st={fromBackend:function(t){return{documentId:t.document_id,amount:t.amount,currency:t.currency,paymentMethod:t.payment_method}},toBackend:function(t){return{document_id:t.documentId,amount:t.amount,currency:t.currency,payment_method:t.paymentMethod}}},ct=void 0,lt=function(t,e){var n=t.commit;n(at.NOTIFICATION,e)},ut=function(t,e){var n=t.commit,r=e.email,a=e.subject,o=e.message;return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,L(r,a,o)];case 1:return e.sent(),n(at.NOTIFICATION,{message:"Thank you for your message",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(at.NOTIFICATION,{message:"Unable to send message",type:"error"}),[3,3];case 3:return[2]}}))}))},dt=function(t,e){var n=t.commit,r=t.dispatch,a=e.email,o=e.password;return c["b"](ct,void 0,void 0,(function(){var t,e,i,s;return c["e"](this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,M(a,o)];case 1:if(t=c.sent().data,e=t.user,i=t.token,!e||!i)throw new Error("User or token missing");return R(i),n(at.LOGIN,{user:ot.fromBackend(e),token:i}),[2,e];case 2:return s=c.sent(),console.error(">> err",s),r(rt.NOTIFICATION,{message:"Incorrect username or password",type:"error"}),[3,3];case 3:return[2,null]}}))}))},pt=function(t,e){var n=t.dispatch,r=e.email;return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,F(r)];case 1:return e.sent(),n(rt.NOTIFICATION,{message:"Email with password restore link sent to your email",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(rt.NOTIFICATION,{message:"Unable to send reset password instructions to desired email.",type:"error"}),[3,3];case 3:return[2]}}))}))},mt=function(t,e){var n=t.dispatch,r=e.email,a=e.password,o=e.confirmation;return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,q(r,a,o)];case 1:return e.sent(),n(rt.NOTIFICATION,{message:"Your account created successfully. Please check your email for confirmation letter.",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(rt.NOTIFICATION,{message:"Unable to create account with such email or password.",type:"error"}),[3,3];case 3:return[2]}}))}))},ft=function(t,e){var n=t.dispatch,r=e.token,a=e.password,o=e.confirmation;return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,B(r,a,o)];case 1:return e.sent(),n(rt.NOTIFICATION,{message:"New password was set. Please login now",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(rt.NOTIFICATION,{message:"Unable to set new password.",type:"error"}),[3,3];case 3:return[2]}}))}))},vt=function(t,e){var n=t.dispatch,r=t.commit;return c["b"](ct,void 0,void 0,(function(){var t,a;return c["e"](this,(function(o){switch(o.label){case 0:e=e||{page:0},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,H(e)];case 2:return t=o.sent().data,r(at.DOCUMENTS,{documents:t.data}),[2,t];case 3:return a=o.sent(),console.error(">> err",a),r(at.DOCUMENTS,{documents:[]}),n(rt.NOTIFICATION,{message:"Unable to load documents.",type:"error"}),[3,4];case 4:return[2]}}))}))},ht=function(t,e,n){var r=t.dispatch,a=t.commit;return c["b"](ct,void 0,void 0,(function(){var t,o;return c["e"](this,(function(i){switch(i.label){case 0:n=n||{page:0},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,z(e,n)];case 2:return t=i.sent().data,a(at.DOCUMENTS,{documents:t.data}),[2,t];case 3:return o=i.sent(),console.error(">> err",o),a(at.DOCUMENTS,{documents:[]}),r(rt.NOTIFICATION,{message:"Unable to load documents.",type:"error"}),[3,4];case 4:return[2]}}))}))},bt=function(t){var e=t.commit,n=t.dispatch;return c["b"](ct,void 0,void 0,(function(){var t,r;return c["e"](this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,J()];case 1:return t=a.sent().data,e(at.POPULAR_DOCUMENTS,{documents:t.data}),[3,3];case 2:return r=a.sent(),console.error(">> err",r),e(at.POPULAR_DOCUMENTS,{documents:[]}),n(rt.NOTIFICATION,{message:"Unable to load most popular documents.",type:"error"}),[3,3];case 3:return[2]}}))}))},yt=function(t,e){var n=t.commit,r=t.dispatch;return c["b"](ct,void 0,void 0,(function(){var t,a;return c["e"](this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,W(e)];case 1:return t=o.sent().data,n(at.CURRENT_DOCUMENT,{document:t.document}),[3,3];case 2:return a=o.sent(),console.error(">> err",a),n(at.CURRENT_DOCUMENT,{document:null}),r(rt.NOTIFICATION,{message:"Unable to load most requested document.",type:"error"}),[3,3];case 3:return[2]}}))}))},gt=function(t,e){return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(n){switch(n.label){case 0:return[4,Q(st.toBackend(e))];case 1:return t=n.sent().data,[2,{clientSecret:t.client_secret}]}}))}))},_t=function(t,e){return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(n){switch(n.label){case 0:return[4,$(e)];case 1:return t=n.sent().data.purchase,[2,{purchase:it.fromBackend(t)}]}}))}))},Ot=function(t){return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return[4,G()];case 1:return t=e.sent().data,[2,t.data]}}))}))},Ct=function(t,e){var n=t.state,r=t.dispatch,a=t.commit;return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,Z(e.title,e.organization,e.description||"",e.file)];case 1:return t=o.sent(),a(at.DOCUMENTS,{documents:n.documents.concat([t])}),r(rt.NOTIFICATION,{message:"Document successfully created",type:"success"}),[2,t];case 2:return o.sent(),console.error(">> err"),r(rt.NOTIFICATION,{message:"Unable to create document",type:"error"}),[3,3];case 3:return[2]}}))}))},At=function(t,e){var n=t.state,r=t.dispatch,a=t.commit;return c["b"](ct,void 0,void 0,(function(){var t,o;return c["e"](this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,X(e.id)];case 1:return i.sent(),t=n.documents.filter((function(t){return t.id!==e.id})),a(at.DOCUMENTS,{documents:t}),r(rt.NOTIFICATION,{message:"Document deleted.",type:"success"}),[3,3];case 2:return o=i.sent(),console.error(">> err",o),r(rt.NOTIFICATION,{message:"Unable to delete documents.",type:"error"}),[3,3];case 3:return[2]}}))}))},Dt=function(t,e){var n=t.dispatch,r=e.document;return c["b"](ct,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,tt(r)];case 1:return e.sent(),n(rt.NOTIFICATION,{message:"Document updated.",type:"success"}),[3,3];case 2:return t=e.sent(),console.error(">> err",t),n(rt.NOTIFICATION,{message:"Unable to update documents.",type:"error"}),[3,3];case 3:return[2]}}))}))},wt=function(t,e){var n=t.dispatch,r=t.commit;return c["b"](ct,void 0,void 0,(function(){var t,a;return c["e"](this,(function(o){switch(o.label){case 0:e=e||{page:0},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Y(e)];case 2:return t=o.sent().data,r(at.USERS,{users:t.data.map(ot.fromBackend)}),[3,4];case 3:return a=o.sent(),console.error(">> err",a),n(rt.NOTIFICATION,{message:"Unable to load users.",type:"error"}),[3,4];case 4:return[2]}}))}))},xt=function(t,e){var n=t.dispatch,r=t.state,a=t.commit,o=e.user;return c["b"](ct,void 0,void 0,(function(){var t,e,i,s;return c["e"](this,(function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,nt(ot.toBackend(o))];case 1:return t=c.sent().data.user,e=r.users.slice(),i=e.findIndex((function(e){return e.id===t.id})),console.log("Searching in users array",JSON.stringify(e)," for user ",JSON.stringify(t),"index is",JSON.stringify(i)),-1!==i&&e.splice(i,1,ot.fromBackend(t)),console.log("New users:",JSON.stringify(e)),a(at.USERS,{users:e}),n(rt.NOTIFICATION,{message:"User updated.",type:"success"}),[3,3];case 2:return s=c.sent(),console.error(">> err",s),n(rt.NOTIFICATION,{message:"Unable to update user.",type:"error"}),[3,3];case 3:return[2]}}))}))},Tt=function(t,e){var n=t.state,r=t.dispatch,a=t.commit;return c["b"](ct,void 0,void 0,(function(){var t,o;return c["e"](this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,et(e.id)];case 1:return i.sent(),t=n.users.filter((function(t){return t.id!==e.id})),a(at.USERS,{users:t}),r(rt.NOTIFICATION,{message:"User deleted.",type:"success"}),[3,3];case 2:return o=i.sent(),console.error(">> err",o),r(rt.NOTIFICATION,{message:"Unable to delete user.",type:"error"}),[3,3];case 3:return[2]}}))}))},Et=function(t,e){var n=t.dispatch,r=t.commit;return c["b"](ct,void 0,void 0,(function(){var t,a;return c["e"](this,(function(o){switch(o.label){case 0:e=e||{page:0},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,K(e)];case 2:return t=o.sent(),r(at.PURCHASES,t),[3,4];case 3:return a=o.sent(),console.error(">> err",a),n(rt.NOTIFICATION,{message:"Unable to load purchases.",type:"error"}),[3,4];case 4:return[2]}}))}))},St=(S={},S[rt.NOTIFICATION]=lt,S[rt.CONTACT]=ut,S[rt.LOGIN]=dt,S[rt.FORGOT_PASSWORD]=pt,S[rt.REGISTER]=mt,S[rt.RESET_PASSWORD]=ft,S[rt.LOAD_DOCUMENTS]=vt,S[rt.SEARCH_DOCUMENTS]=ht,S[rt.DOCUMENTS_LOAD_POPULAR]=bt,S[rt.LOAD_DOCUMENT]=yt,S[rt.ADMIN_LOAD_USERS]=wt,S[rt.ADMIN_UPDATE_USER]=xt,S[rt.ADMIN_DELETE_USER]=Tt,S[rt.ADMIN_LOAD_PURCHASES]=Et,S[rt.ADMIN_CREATE_DOCUMENT]=Ct,S[rt.ADMIN_DELETE_DOCUMENT]=At,S[rt.ADMIN_UPDATE_DOCUMENT]=Dt,S[rt.PRE_PURCHASE_DOCUMENT]=gt,S[rt.CHECK_PURCHASE_DOCUMENT]=_t,S[rt.GET_USER_DOCUMENTS]=Ot,S),Nt=(N={},N[at.LOADING]=function(t,e){t.loading=e},N[at.NOTIFICATION]=function(t,e){t.notification=e},N[at.LOGIN]=function(t,e){var n=e.user,r=e.token;t.user=n,t.token=r},N[at.LOGOUT]=function(t){t.user=null,t.token=null},N[at.USER]=function(t,e){var n=e.user;t.user=n},N[at.TOKEN]=function(t,e){var n=e.token;t.token=n},N[at.DOCUMENTS]=function(t,e){var n=e.documents;t.documents=n},N[at.CURRENT_DOCUMENT]=function(t,e){var n=e.document;t.currentDocument=n},N[at.PURCHASES]=function(t,e){var n=e.purchases;t.purchases=n},N[at.CURRENT_PURCHASE]=function(t,e){var n=e.purchase;t.currentPurchase=n},N[at.USERS]=function(t,e){var n=e.users;t.users=n},N[at.POPULAR_DOCUMENTS]=function(t,e){var n=e.documents;t.popularDocuments=n},N);r["a"].use(C["a"]);var Ut=new C["a"].Store({state:{loading:!1,notification:null,user:null,token:null,documents:[],currentDocument:null,popularDocuments:[],purchases:[],currentPurchase:null,payment:null,users:[],editUser:null},getters:{isLoggedOn:function(t){return!(!t.user||!t.token)},isAdmin:function(t){return!(!t.user||"admin"!==t.user.role)}},mutations:Nt,actions:St,plugins:[Object(P["a"])({paths:["token","user"]})]});Ut.subscribe((function(t,e){R(e.token)}));var kt=function(){return{id:"",title:"",organization:"",description:"",text:"",price:10}},Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),Object.defineProperty(e.prototype,"notification",{get:function(){return this.notif},set:function(t){this.setNotification(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){if(this.notif)switch(this.notif.type){case"success":return"green lighten-1";case"warn":return"amber darken-3";case"error":return"red darken-1"}return"blue lighten-1"},enumerable:!0,configurable:!0}),e.prototype.handleTokenChange=function(t,e){t&&!e&&(console.log(">> Set token"),R(this.token))},c["c"]([Object(U["c"])("token")],e.prototype,"token",void 0),c["c"]([Object(U["c"])("notification")],e.prototype,"notif",void 0),c["c"]([Object(U["a"])(rt.NOTIFICATION)],e.prototype,"setNotification",void 0),c["c"]([Object(k["c"])("token",{immediate:!0})],e.prototype,"handleTokenChange",null),e=c["c"]([Object(l["b"])({components:{AppFooter:g,Loader:E}})],e),e}(r["a"]),jt=Pt,Vt=jt,It=n("7496"),Rt=n("8336"),Mt=n("2db4"),Lt=Object(f["a"])(Vt,i,s,!1,null,null,null),Ft=Lt.exports;h()(Lt,{VApp:It["a"],VBtn:Rt["a"],VSnackbar:Mt["a"]});var qt=n("9483");Object(qt["a"])("/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var Bt=n("8c4f"),Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{light:""}},[n("v-app-bar",{attrs:{"clipped-left":t.clipped,fixed:"",app:""}},[n("img",{style:{height:"48px",width:"48px",marginRight:"16px",borderRadius:"5px"},attrs:{src:t.logo,alt:t.title}}),n("v-toolbar-title",[n("h1",{staticClass:"display-3"},[t._v(t._s(t.title))])]),n("v-spacer"),n("account-button")],1),n("v-content",[n("router-view")],1)],1)},Gt=[],zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{color:"primary",dark:""}},r),[t._v(" Hello, "),n("b",[t._v(t._s(t.user.name))])])]}}],null,!1,989370058)},[n("v-list",[n("v-list-item",{attrs:{link:"",to:"/"}},[n("v-list-item-title",[t._v("Home")])],1),n("v-list-item",{attrs:{link:"",to:"/document/purchases"}},[n("v-list-item-title",[t._v("My purchases")])],1),t.isAdmin?n("v-menu",{attrs:{"offset-x":"","open-on-hover":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-list-item",t._g({attrs:{link:""}},r),[n("v-list-item-title",[t._v("Admin")]),n("v-list-item-action",[n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-chevron-right")])],1)],1)],1)]}}],null,!1,2733391519)},[n("v-list",[n("v-list-item",{attrs:{link:"",to:"/admin/list_documents"}},[n("v-list-item-title",[t._v("Documents")])],1),n("v-list-item",{attrs:{link:"",to:"/admin/list_users"}},[n("v-list-item-title",[t._v("Users")])],1)],1)],1):t._e(),n("v-divider"),n("v-list-item",{attrs:{link:""},on:{click:t.handleLogout}},[n("v-list-item-title",[t._v("Logout")])],1)],1)],1):n("v-btn",{attrs:{color:"primary",dark:"",to:"/account/login"}},[t._v("Login / Register")])},Yt=[],Kt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.menuItems=[{title:"Home",to:"/"},{title:"My purchases",to:"/document/purchases"},{title:"Logout",click:e.handleLogout}],e}return c["d"](e,t),Object.defineProperty(e.prototype,"isAdmin",{get:function(){return this.user&&"admin"===this.user.role},enumerable:!0,configurable:!0}),e.prototype.handleLogout=function(){this.logout(),this.$router.go(0)},c["c"]([Object(U["c"])("user")],e.prototype,"user",void 0),c["c"]([Object(U["b"])(at.LOGOUT)],e.prototype,"logout",void 0),e=c["c"]([Object(l["b"])({components:{DefaultLayout:fe}})],e),e}(r["a"]),Jt=Kt,Wt=Jt,Qt=n("ce7e"),$t=n("132d"),Zt=n("8860"),Xt=n("da13"),te=n("1800"),ee=n("5d23"),ne=n("e449"),re=Object(f["a"])(Wt,zt,Yt,!1,null,null,null),ae=re.exports;h()(re,{VBtn:Rt["a"],VDivider:Qt["a"],VIcon:$t["a"],VList:Zt["a"],VListItem:Xt["a"],VListItemAction:te["a"],VListItemTitle:ee["b"],VMenu:ne["a"]});var oe=n("4ffd"),ie=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drawer=!1,e.miniVariant=!1,e.clipped=!1,e.title="Sailshift",e.logo=oe,e.items=[{icon:"mdi-apps",title:"Welcome",to:"/"},{icon:"mdi-chart-bubble",title:"Inspire",to:"/inspire"}],e}return c["d"](e,t),e=c["c"]([Object(l["b"])({components:{AccountButton:ae}})],e),e}(r["a"]),se=ie,ce=se,le=n("40dc"),ue=n("a75b"),de=n("2fa4"),pe=n("2a7f"),me=Object(f["a"])(ce,Ht,Gt,!1,null,null,null),fe=me.exports;h()(me,{VApp:It["a"],VAppBar:le["a"],VContent:ue["a"],VSpacer:de["a"],VToolbarTitle:pe["a"]});var ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:""}},[n("v-content",[n("v-container",{staticClass:"fill-height"},[n("router-view")],1)],1)],1)},he=[],be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e=c["c"]([Object(l["b"])({components:{}})],e),e}(r["a"]),ye=be,ge=ye,_e=n("a523"),Oe=Object(f["a"])(ge,ve,he,!1,null,null,null),Ce=Oe.exports;h()(Oe,{VApp:It["a"],VContainer:_e["a"],VContent:ue["a"]});var Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{lg:"6",md:"6",sm:"12"}},[n("form",{staticClass:"heading",on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[n("h1",{staticClass:"display-4 text-center mb-8"},[t._v("SAILSHIFT")]),n("h3",{staticClass:"headline text-center mb-8"},[t._v("Get Help with your Homework Today")]),n("v-text-field",{staticClass:"search-input pb-8",attrs:{outlined:"","append-outer-icon":"mdi-magnify","clear-icon":"mdi-close-circle",clearable:"",label:"",type:"text"},on:{"click:append-outer":t.search},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1)])],1),n("top-purchases",{attrs:{title:"Top documents"}})],1)],1)},De=[],we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"popular"},[n("v-col",[n("v-row",[n("v-col",[n("h3",{staticClass:"headline text-center"},[t._v(t._s(t.title))])])],1),t.hasPopular?n("v-row",t._l(t.popularDocuments,(function(e,r){return n("v-col",{key:r},[n("document-card",{attrs:{document:e,maxHeight:t.maxHeight,maxWidth:t.maxWidth,showPurchase:!1}})],1)})),1):n("v-row",{staticClass:"justify-center"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"24",color:"indigo darken-2"}}),n("div",{staticClass:"ml-4 body-2"},[t._v("Loading popular...")])],1)],1)],1)},xe=[],Te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"document-car-outer",attrs:{to:{name:"document.document",params:{documentId:t.document.id}}}},[n("v-card",{staticClass:"document-card",attrs:{"max-width":t.maxWidth,"max-height":t.maxHeight}},[n("v-card-title",{staticClass:"headline text-truncate"},[t._v(t._s(t.document.title))]),n("v-card-subtitle",{staticClass:"pb-0"},[t._v(t._s(t.document.organization))]),n("v-card-text",{staticClass:"text--primary text-fade card-text"},[t._v(t._s(t.document.text))]),t.showPurchase?n("v-card-actions",[n("v-btn",{attrs:{color:"primary"},on:{click:t.onPurchase}},[t._v("Purchase document")])],1):t._e()],1)],1)},Ee=[],Se=n("fce7"),Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),c["c"]([Object(k["b"])({default:200})],e.prototype,"maxHeight",void 0),c["c"]([Object(k["b"])({default:200})],e.prototype,"maxWidth",void 0),c["c"]([Object(k["b"])(Se["Document"])],e.prototype,"document",void 0),c["c"]([Object(k["b"])({default:!1})],e.prototype,"showPurchase",void 0),c["c"]([Object(k["b"])(Function)],e.prototype,"onPurchase",void 0),e=c["c"]([Object(l["b"])({})],e),e}(r["a"]),Ue=Ne,ke=Ue,Pe=(n("7c82"),n("b0af")),je=n("99d9"),Ve=Object(f["a"])(ke,Te,Ee,!1,null,"65e35d72",null),Ie=Ve.exports;h()(Ve,{VBtn:Rt["a"],VCard:Pe["a"],VCardActions:je["a"],VCardSubtitle:je["b"],VCardText:je["c"],VCardTitle:je["d"]});var Re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),Object.defineProperty(e.prototype,"hasPopular",{get:function(){return this.popularDocuments&&this.popularDocuments},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.loadPopularDocuments()},c["c"]([Object(k["b"])({default:"Top purchased"})],e.prototype,"title",void 0),c["c"]([Object(k["b"])({default:200})],e.prototype,"maxHeight",void 0),c["c"]([Object(k["b"])({default:200})],e.prototype,"maxWidth",void 0),c["c"]([Object(U["c"])("popularDocuments")],e.prototype,"popularDocuments",void 0),c["c"]([Object(U["a"])(rt.DOCUMENTS_LOAD_POPULAR)],e.prototype,"loadPopularDocuments",void 0),e=c["c"]([Object(l["b"])({components:{DocumentCard:Ie}})],e),e}(r["a"]),Me=Re,Le=Me,Fe=n("62ad"),qe=n("0fd9"),Be=Object(f["a"])(Le,we,xe,!1,null,"d2424e50",null),He=Be.exports;h()(Be,{VCol:Fe["a"],VProgressCircular:x["a"],VRow:qe["a"]});var Ge=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.query="",e}return c["d"](e,t),e.prototype.search=function(){this.$router.push({name:"document.search",query:{query:this.query}})},e=c["c"]([Object(l["b"])({components:{TopPurchases:He}})],e),e}(r["a"]),ze=Ge,Ye=ze,Ke=(n("96b6"),n("8654")),Je=Object(f["a"])(Ye,Ae,De,!1,null,"7fc14180",null),We=Je.exports;h()(Je,{VCol:Fe["a"],VRow:qe["a"],VTextField:Ke["a"]});var Qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[n("v-card",{attrs:{"max-width":""}},[n("v-card-title",[t._v(" Login ")]),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-row",[n("v-col",{staticClass:"text-right pt-0"},[n("router-link",{staticClass:"no-underline small",attrs:{to:"/account/forgot_password"}},[t._v("Forgot password?")])],1)],1),n("v-row",{staticClass:"align-center"},[n("v-col",{staticClass:"pt-0 pb-0"},[n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v(" Login ")]),n("span",{staticClass:"separator pl-4 pr-4"},[t._v(" OR ")]),n("router-link",{staticClass:"no-underline",attrs:{to:"/account/register"}},[t._v("Register")])],1)],1)],1)],1)],1)],1)],1)},$e=[],Ze=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.email="",e.password="",e.valid=!0,e}return c["d"](e,t),Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:if(!this.form.validate())return[2];this.loading(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,this.login({email:this.email,password:this.password})];case 2:return t=e.sent(),t&&this.$router.push({name:Ia.home}),[3,4];case 3:return this.loading(!1),[7];case 4:return[2]}}))}))},c["c"]([Object(U["b"])(at.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(U["a"])(rt.LOGIN)],e.prototype,"login",void 0),e=c["c"]([Object(l["b"])({components:{}})],e),e}(r["a"]),Xe=Ze,tn=Xe,en=(n("a20a"),n("4bd4")),nn=Object(f["a"])(tn,Qe,$e,!1,null,"3bc8aac1",null),rn=nn.exports;h()(nn,{VBtn:Rt["a"],VCard:Pe["a"],VCardText:je["c"],VCardTitle:je["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:Ke["a"]});var an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[n("v-card",{attrs:{"max-width":""}},[n("v-card-title",[t._v(" Login ")]),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-text-field",{attrs:{label:"Password",type:"password",required:"",counter:10},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-text-field",{attrs:{label:"Password confirmation",type:"password",required:"",counter:10},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}}),n("v-row",{staticClass:"align-center"},[n("v-col",{staticClass:"pb-0"},[n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v(" Register ")]),n("span",{staticClass:"separator pl-4 pr-4"},[t._v(" OR ")]),n("router-link",{staticClass:"no-underline",attrs:{to:"/account/login"}},[t._v("Already have an account?")])],1)],1)],1)],1)],1)],1)],1)},on=[],sn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.email="",e.password="",e.confirmation="",e.valid=!0,e}return c["d"](e,t),Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){return c["e"](this,(function(t){switch(t.label){case 0:if(!this.form.validate())return[2];this.loading(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,this.register({email:this.email,password:this.password,confirmation:this.confirmation})];case 2:return t.sent(),[3,4];case 3:return this.loading(!1),[7];case 4:return[2]}}))}))},c["c"]([Object(U["b"])(at.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(U["a"])(rt.REGISTER)],e.prototype,"register",void 0),e=c["c"]([Object(l["b"])({components:{}})],e),e}(r["a"]),cn=sn,ln=cn,un=(n("4059"),Object(f["a"])(ln,an,on,!1,null,"b1fad6de",null)),dn=un.exports;h()(un,{VBtn:Rt["a"],VCard:Pe["a"],VCardText:je["c"],VCardTitle:je["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:Ke["a"]});var pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[n("v-card",{attrs:{"max-width":""}},[n("v-card-title",[t._v(" Forgot password? ")]),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"E-mail",rules:t.rules.email,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-row",[n("v-col",{staticClass:"text-right pt-0"},[n("router-link",{staticClass:"no-underline small",attrs:{to:"/account/login"}},[t._v("Remember your password?")])],1)],1),n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v(" Reset ")])],1)],1)],1)],1)],1)},mn=[],fn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.email="",e.valid=!0,e.rules={email:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}]},e}return c["d"](e,t),Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:if(!this.form.validate())return[2];this.loading(!0),e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,this.forgotPassword({email:this.email})];case 2:return e.sent(),[3,5];case 3:return t=e.sent(),console.error(">>>",t),[3,5];case 4:return this.loading(!1),[7];case 5:return[2]}}))}))},c["c"]([Object(U["b"])(at.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(U["a"])(rt.FORGOT_PASSWORD)],e.prototype,"forgotPassword",void 0),e=c["c"]([Object(l["b"])({components:{}})],e),e}(r["a"]),vn=fn,hn=vn,bn=(n("3add"),Object(f["a"])(hn,pn,mn,!1,null,"60b5d040",null)),yn=bn.exports;h()(bn,{VBtn:Rt["a"],VCard:Pe["a"],VCardText:je["c"],VCardTitle:je["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:Ke["a"]});var gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[n("v-card",{attrs:{"max-width":""}},[t.token?n("v-card-title",[t._v(" Set new password ")]):n("v-card-title",{staticClass:"red--text lighten-1 display-1 justify-center"},[t._v(" Token is invalid ")]),t.token?n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"Password",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-text-field",{attrs:{label:"Confirmation",type:"password",required:""},model:{value:t.confirmation,callback:function(e){t.confirmation=e},expression:"confirmation"}}),n("v-row",{staticClass:"align-center"},[n("v-col",{staticClass:"pt-0 pb-0"},[n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v(" Set new password ")])],1)],1)],1)],1):t._e()],1)],1)],1)},_n=[],On=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.password="",e.confirmation="",e.token="",e.valid=!0,e}return c["d"](e,t),e.prototype.created=function(){this.token=this.$route.params.token},Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){return c["e"](this,(function(t){switch(t.label){case 0:if(!this.form.validate())return[2];this.loading(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,this.resetPassword({password:this.password,confirmation:this.confirmation,token:this.token})];case 2:return t.sent(),[3,4];case 3:return this.loading(!1),[7];case 4:return[2]}}))}))},c["c"]([Object(U["b"])(at.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(U["a"])(rt.RESET_PASSWORD)],e.prototype,"resetPassword",void 0),e=c["c"]([Object(l["b"])({components:{}})],e),e}(r["a"]),Cn=On,An=Cn,Dn=Object(f["a"])(An,gn,_n,!1,null,null,null),wn=Dn.exports;h()(Dn,{VBtn:Rt["a"],VCard:Pe["a"],VCardText:je["c"],VCardTitle:je["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:Ke["a"]});var xn,Tn,En=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height white",attrs:{fluid:""}},[t.document?n("div",[n("v-row",{staticClass:"document-heading"},[n("v-col",[t._v(" "+t._s(t.document?t.document.organization:"...")+" | "+t._s(t.document&&t.document.department||"â")+" ")])],1),n("v-row",{staticClass:"document-main flex-row"},[n("v-col",{attrs:{sm:"12",md:"8",lg:"9"}},[n("v-card",{staticClass:"pl-4 pr-4"},[n("v-card-title",{staticClass:"justify-center"},[n("h2",{staticClass:"heading"},[t._v(t._s(t.document?t.document.title:"..."))])]),n("v-card-text",[n("p",{style:{textAlign:"justify"}},[t._v(t._s(t.document?t.document.text:"..."))])])],1)],1),n("v-col",{attrs:{sm:"12",md:"4",lg:"3"}},[n("v-card",[n("v-card-subtitle",[t._v(' Upon payment link to download document will be sent to your email. Also document appears under your profile "active documents" section. ')]),n("v-card-title",{staticClass:"display-3 justify-center"},[t._v(" $"+t._s(t.document?t.document.price.toFixed(2):"...")+" ")]),n("v-card-actions",{staticClass:"justify-center"},[t.user&&t.user.id?n("purchase-dialog",{attrs:{title:"Purchase document",user:t.user,document:t.document,onPurchase:t.handlePurchase,onClose:t.handleClose}}):t._e()],1),n("v-card-subtitle",{staticClass:"pa-2 text-center font-weight-light"},[t._v(" Proudly secured by Stripe ")])],1)],1)],1)],1):t.user?n("v-row",{staticClass:"justify-center"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"24",color:"indigo darken-2"}}),n("div",{staticClass:"ml-4 body-2"},[t._v("Loading document...")])],1):n("v-row",{staticClass:"justify-center pa-8"},[n("h1",{staticClass:"display-3"},[t._v("Please login")]),n("h3",{staticClass:"display-1"},[t._v(" Document preview available only for registered users. Please login or register via button above. ")])]),n("top-purchases",{attrs:{title:"Popular documents",maxHeight:180,maxWidth:180}})],1)},Sn=[],Nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"700"},on:{input:t.handleDialogInput},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[n("v-btn",t._g({attrs:{color:"red lighten-2",dark:""}},r),[t._v(" "+t._s(t.title||"Purchase")+" ")])]}}]),model:{value:t.open,callback:function(e){t.open=e},expression:"open"}},["intent"===t.paymentStep?n("prepurchase-card",{attrs:{document:t.document,onConfirm:t.handlePrepurchase,onCancel:t.handleClose}}):t._e(),"payment"===t.paymentStep?n("purchase-card",{attrs:{document:t.document,user:t.user,onConfirm:t.handlePurchase,onCancel:t.handleClose}}):t._e(),"done"===t.paymentStep?n("payment-result-card",{attrs:{error:t.paymentError,intent:t.paymentIntent,onConfirm:t.handleResult}}):t._e()],1)},Un=[],kn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e.prototype.runWithLoading=function(t,e){return c["b"](this,void 0,void 0,(function(){var n,r;return c["e"](this,(function(a){switch(a.label){case 0:this.loading(!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,t()];case 2:return n=a.sent(),[2,n];case 3:return r=a.sent(),e&&e(r),[3,5];case 4:return this.loading(!1),[7];case 5:return[2]}}))}))},e.prototype.awaitForConditionAndRun=function(t,e){return c["b"](this,void 0,void 0,(function(){var n,r,a,o;return c["e"](this,(function(i){switch(i.label){case 0:n=5,r=300,a=1.2,o=!1,i.label=1;case 1:return n>=0?(n--,console.log(">> 1",o),o?[2,e()]:(console.log(">> 2",t()),t()&&(o=!0),[4,new Promise((function(t){return setTimeout((function(){return t()}),r)}))])):[3,3];case 2:return i.sent(),r*=a,console.log(">> 3",r),[3,1];case 3:return[2]}}))}))},c["c"]([Object(U["b"])(at.LOADING)],e.prototype,"loading",void 0),e=c["c"]([Object(l["b"])({})],e),e}(r["a"]),Pn=kn,jn=Pn,Vn=Object(f["a"])(jn,xn,Tn,!1,null,null,null),In=Vn.exports,Rn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"pre-purchase-card"},[n("v-card-title",{staticClass:"headline teal lighten-3 mb-4",attrs:{"primary-title":""}},[t._v(" Purchase review and data collection policy ")]),n("v-card-text",[n("div",[n("p",[t._v("You're going to purchase following document:")]),n("div",{staticClass:"title"},[t._v("Document: "),n("b",[t._v(t._s(t.document.title))])]),n("div",{staticClass:"title"},[t._v("Price: "),n("b",[t._v("$"+t._s(t.document.price.toFixed(2)))])])]),n("div",[n("p",[t._v("Please review what data we collect and how do we secure it:")]),n("div",[t._v("All payments performed through Strip and we do not store any of your credit card data.")])])]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.onConfirm}},[t._v(" Confirm ")]),n("v-btn",{attrs:{color:"default",text:""},on:{click:t.onCancel}},[t._v(" Cancel ")])],1)],1)},Mn=[],Ln=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),c["c"]([Object(k["b"])(Function)],e.prototype,"onCancel",void 0),c["c"]([Object(k["b"])(Function)],e.prototype,"onConfirm",void 0),c["c"]([Object(k["b"])(Object)],e.prototype,"document",void 0),e=c["c"]([Object(l["b"])({})],e),e}(r["a"]),Fn=Ln,qn=Fn,Bn=Object(f["a"])(qn,Rn,Mn,!1,null,null,null),Hn=Bn.exports;h()(Bn,{VBtn:Rt["a"],VCard:Pe["a"],VCardActions:je["a"],VCardText:je["c"],VCardTitle:je["d"],VDivider:Qt["a"],VSpacer:de["a"]});var Gn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"purchase-card"},[n("v-card-title",{staticClass:"headline teal lighten-3 mb-4",attrs:{"primary-title":""}},[t._v(" Payment details ")]),n("v-card-text",[n("stripe-elements",{ref:"stripeRef",attrs:{pk:t.stripePublishableKey,amount:t.amount}})],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.handleConfirm}},[t._v(" Pay $"+t._s(t.amount/100)+" ")]),n("v-btn",{attrs:{color:"default",text:""},on:{click:t.onCancel}},[t._v(" Cancel ")])],1)],1)},zn=[],Yn=n("bce0"),Kn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stripePublishableKey=Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_STRIPE_API_PUBLISHABLE_KEY,e}return c["d"](e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this.document?Math.floor(100*this.document.price):0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stripeElement",{get:function(){return this.$refs.stripeRef},enumerable:!0,configurable:!0}),e.prototype.handleConfirm=function(){if(this.user){var t=this.stripeElement.stripe;this.onConfirm(t,{payment_method:{card:this.stripeElement.card,billing_details:{name:this.user.name}}})}},c["c"]([Object(U["c"])("user")],e.prototype,"user",void 0),c["c"]([Object(k["b"])(Function)],e.prototype,"onCancel",void 0),c["c"]([Object(k["b"])(Function)],e.prototype,"onConfirm",void 0),c["c"]([Object(k["b"])(Object)],e.prototype,"document",void 0),e=c["c"]([Object(l["b"])({components:{StripeElements:Yn["StripeElements"]}})],e),e}(r["a"]),Jn=Kn,Wn=Jn,Qn=Object(f["a"])(Wn,Gn,zn,!1,null,null,null),$n=Qn.exports;h()(Qn,{VBtn:Rt["a"],VCard:Pe["a"],VCardActions:je["a"],VCardText:je["c"],VCardTitle:je["d"],VDivider:Qt["a"],VSpacer:de["a"]});var Zn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"payment-result-card"},[n("v-card-title",{staticClass:"headline teal lighten-3 mb-4",attrs:{"primary-title":""}},[t._v(" Payment results ")]),n("v-card-text",[t.error?n("div"):t._e(),t.intent?n("div",[n("p",[t._v(" Your payment "),n("b",[t._v(t._s(t.intent.id))]),t._v(" received and now processing. You could close this popup safely, when payment procesed - document appears in your profile for predefined time. Otherwise you can wait, we perform payment status check for you in a moment. ")]),t.purchase?t._e():n("v-progress-linear",{attrs:{indeterminate:"",size:"32"}}),n("div",[n("span",{domProps:{innerHTML:t._s(t.message)}})])],1):t._e()]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.onConfirm}},[t._v(" Close ")])],1)],1)},Xn=[],tr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.message="Checking payment status...",e.timer=null,e.timeoutInterval=3e3,e.dontSetTimeout=!1,e.purchase=null,e.checking=!1,e.checkAttempts=0,e.checkAttemptsWarn=4,e.checkAttemptsStop=6,e}return c["d"](e,t),Object.defineProperty(e.prototype,"paymentId",{get:function(){return this.intent?this.intent.id:null},enumerable:!0,configurable:!0}),e.prototype.stopTimer=function(){this.timer&&(this.dontSetTimeout=!0,clearTimeout(this.timer),this.timer=null)},e.prototype.timerHandler=function(){return c["b"](this,void 0,void 0,(function(){var t,e,n=this;return c["e"](this,(function(r){switch(r.label){case 0:if(this.checkAttempts>=this.checkAttemptsWarn&&(this.message="Payment processeing takes a little bit longer time..."),this.checkAttempts>=this.checkAttemptsStop)return console.log(">> Payment wasn't confirmed after "+this.checkAttemptsStop+" attemps, stop further checking"),this.stopTimer(),[2];if(!this.paymentId)return[3,5];this.message="Checking payment "+this.paymentId+" status...",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.checkPurchase(this.paymentId)];case 2:return t=r.sent(),this.purchase=t.purchase||{},[3,4];case 3:return e=r.sent(),console.log(">> check purchase faile with error",e),this.purchase=null,[3,4];case 4:return this.purchase&&"failed"===this.purchase.paymentStatus?(this.message="Payment failed, please contact us with payment Id "+this.paymentId,[2]):this.purchase&&"success"===this.purchase.paymentStatus?(this.message='Payment successful! Here is <a _target="blank" href="'+this.purchase.downloadUrl+'">link to document download.</a>. Also you can find this document on your profile page. Document was purchased at '+this.purchase.purchasedAt+" (UTC) and will be available until "+this.purchase.validUntil+" (UTC)",[2]):(this.message="Payment "+this.paymentId+" not processed yet, waiting...",[3,6]);case 5:console.log(">> No payment id"),r.label=6;case 6:return this.timer=setTimeout((function(){n.checkAttempts++,n.timerHandler()}),this.timeoutInterval),[2]}}))}))},e.prototype.mounted=function(){var t=this;console.log(">> PaymentResultCard mounted"),this.timer=setTimeout((function(){return t.timerHandler()}),this.timeoutInterval)},e.prototype.beforeDestroy=function(){console.log(">> PaymentResultCard going to be destroyed"),this.stopTimer()},c["c"]([Object(k["b"])(Function)],e.prototype,"onConfirm",void 0),c["c"]([Object(k["b"])(Object)],e.prototype,"error",void 0),c["c"]([Object(k["b"])(Object)],e.prototype,"intent",void 0),c["c"]([Object(U["a"])(rt.CHECK_PURCHASE_DOCUMENT)],e.prototype,"checkPurchase",void 0),e=c["c"]([Object(l["b"])({})],e),e}(r["a"]),er=tr,nr=er,rr=n("8e36"),ar=Object(f["a"])(nr,Zn,Xn,!1,null,null,null),or=ar.exports;h()(ar,{VBtn:Rt["a"],VCard:Pe["a"],VCardActions:je["a"],VCardText:je["c"],VCardTitle:je["d"],VDivider:Qt["a"],VProgressLinear:rr["a"],VSpacer:de["a"]});var ir=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.open=!1,e.paymentStep="intent",e.clientSecret=null,e.paymentError=null,e.paymentIntent=null,e}return c["d"](e,t),e.prototype.mounted=function(){this.paymentIntent={id:"evt_1GkvJDJtdDvmMFZWHlYXqnjE",object:"event",api_version:"2020-03-02",created:1589994143,data:{object:{id:"pi_1Gl5zOJtdDvmMFZWLRQ9UBIq",object:"payment_intent",amount:2150,amount_capturable:0,amount_received:2150,application:null,application_fee_amount:null,canceled_at:null,cancellation_reason:null,capture_method:"automatic",charges:{object:"list",data:[{id:"ch_1GkvJDJtdDvmMFZW4Fe7EDGt",object:"charge",amount:2150,amount_refunded:0,application:null,application_fee:null,application_fee_amount:null,balance_transaction:"txn_1GkvJDJtdDvmMFZWKc6sgxBg",billing_details:{address:{city:null,country:null,line1:null,line2:null,postal_code:"12312",state:null},email:null,name:"Alex The First",phone:null},calculated_statement_descriptor:"Stripe",captured:!0,created:1589994143,currency:"usd",customer:null,description:null,destination:null,dispute:null,disputed:!1,failure_code:null,failure_message:null,fraud_details:{},invoice:null,livemode:!1,metadata:{purchase_id:"26"},on_behalf_of:null,order:null,outcome:{network_status:"approved_by_network",reason:null,risk_level:"normal",risk_score:19,seller_message:"Payment complete.",type:"authorized"},paid:!0,payment_intent:"pi_1Gl5zOJtdDvmMFZWLRQ9UBIq",payment_method:"pm_1GkvJCJtdDvmMFZW94DLrWBD",payment_method_details:{card:{brand:"visa",checks:{address_line1_check:null,address_postal_code_check:"pass",cvc_check:"pass"},country:"US",exp_month:11,exp_year:2023,fingerprint:"xLMBPWFOLLET9ku4",funding:"credit",installments:null,last4:"4242",network:"visa",three_d_secure:null,wallet:null},type:"card"},receipt_email:"nosuchip@gmail.com",receipt_number:null,receipt_url:"https://pay.stripe.com/receipts/acct_184PqDJtdDvmMFZW/ch_1GkvJDJtdDvmMFZW4Fe7EDGt/rcpt_HJYQB5cuADKQYXKpCVRmIW3ZVEQn3EQ",refunded:!1,refunds:{object:"list",data:[],has_more:!1,total_count:0,url:"/v1/charges/ch_1GkvJDJtdDvmMFZW4Fe7EDGt/refunds"},review:null,shipping:null,source:null,source_transfer:null,statement_descriptor:null,statement_descriptor_suffix:null,status:"succeeded",transfer_data:null,transfer_group:null}],has_more:!1,total_count:1,url:"/v1/charges?payment_intent=pi_1Gl5zOJtdDvmMFZWLRQ9UBIq"},client_secret:"pi_1Gl5zOJtdDvmMFZWLRQ9UBIq_secret_kf73A6xJS5vlJVEJMpBiCdB03",confirmation_method:"automatic",created:1589994130,currency:"usd",customer:null,description:null,invoice:null,last_payment_error:null,livemode:!1,metadata:{purchase_id:"26"},next_action:null,on_behalf_of:null,payment_method:"pm_1GkvJCJtdDvmMFZW94DLrWBD",payment_method_options:{card:{installments:null,request_three_d_secure:"automatic"}},payment_method_types:["card"],receipt_email:"nosuchip@gmail.com",review:null,setup_future_usage:null,shipping:null,source:null,statement_descriptor:null,statement_descriptor_suffix:null,status:"succeeded",transfer_data:null,transfer_group:null}},livemode:!1,pending_webhooks:1,request:{id:"req_4NneSQNEJYyFMP",idempotency_key:null},type:"payment_intent.succeeded"}},e.prototype.handleDialogInput=function(t){t&&(this.paymentStep="intent")},e.prototype.handlePrepurchase=function(){return c["b"](this,void 0,void 0,(function(){var t,e=this;return c["e"](this,(function(n){switch(n.label){case 0:return this.document?(t={documentId:this.document.id,amount:this.document.price,currency:"usd",paymentMethod:"card"},console.log(">> prepayment payload:",t),[4,this.runWithLoading((function(){return c["b"](e,void 0,void 0,(function(){var e;return c["e"](this,(function(n){switch(n.label){case 0:return[4,this.prepurchase(t)];case 1:return e=n.sent().clientSecret,this.clientSecret=e,this.paymentStep="payment",[2]}}))}))}))]):[2];case 1:return n.sent(),[2]}}))}))},e.prototype.handlePurchase=function(t,e){return c["b"](this,void 0,void 0,(function(){var n,r,a;return c["e"](this,(function(o){switch(o.label){case 0:return console.log(">> purchase"),[4,t.confirmCardPayment(this.clientSecret,e)];case 1:return n=o.sent(),r=n.error,a=n.paymentIntent,this.paymentError=r||null,this.paymentIntent=a||null,this.paymentStep="done",[2]}}))}))},e.prototype.handleResult=function(){this.open=!1,this.onPurchase()},e.prototype.handleClose=function(){this.open=!1,this.onClose()},c["c"]([Object(k["b"])(String)],e.prototype,"title",void 0),c["c"]([Object(k["b"])(Function)],e.prototype,"onPurchase",void 0),c["c"]([Object(k["b"])(Function)],e.prototype,"onClose",void 0),c["c"]([Object(k["b"])(Object)],e.prototype,"user",void 0),c["c"]([Object(k["b"])(Object)],e.prototype,"document",void 0),c["c"]([Object(U["a"])(rt.PRE_PURCHASE_DOCUMENT)],e.prototype,"prepurchase",void 0),e=c["c"]([Object(l["b"])({components:{PrepurchaseCard:Hn,PurchaseCard:$n,PaymentResultCard:or}})],e),e}(Object(k["a"])(In)),sr=ir,cr=sr,lr=n("169a"),ur=Object(f["a"])(cr,Nn,Un,!1,null,"0ab4cab4",null),dr=ur.exports;h()(ur,{VBtn:Rt["a"],VDialog:lr["a"]});var pr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.documentId="",e}return c["d"](e,t),e.prototype.mounted=function(){this.token&&(this.documentId=this.$route.params.documentId,this.fetch())},e.prototype.fetch=function(){return c["b"](this,void 0,void 0,(function(){return c["e"](this,(function(t){switch(t.label){case 0:return[4,this.loadDocument(this.documentId)];case 1:return t.sent(),[2]}}))}))},e.prototype.handlePurchase=function(){console.log("Purchased")},e.prototype.handleClose=function(){console.log("Not purchased")},c["c"]([Object(U["c"])("user")],e.prototype,"user",void 0),c["c"]([Object(U["c"])("token")],e.prototype,"token",void 0),c["c"]([Object(U["c"])("currentDocument")],e.prototype,"document",void 0),c["c"]([Object(U["a"])(rt.LOAD_DOCUMENT)],e.prototype,"loadDocument",void 0),e=c["c"]([Object(l["b"])({components:{TopPurchases:He,PurchaseDialog:dr}})],e),e}(r["a"]),mr=pr,fr=mr,vr=(n("ac53"),Object(f["a"])(fr,En,Sn,!1,null,"f981d8bc",null)),hr=vr.exports;h()(vr,{VCard:Pe["a"],VCardActions:je["a"],VCardSubtitle:je["b"],VCardText:je["c"],VCardTitle:je["d"],VCol:Fe["a"],VContainer:_e["a"],VProgressCircular:x["a"],VRow:qe["a"]});var br=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"search-pane-container white pa-4 align-start",attrs:{"fill-height":"",fluid:""}},[n("v-row",{staticClass:"flex-column fill-height"},[n("search-filter-panel",{staticClass:"flex-0",attrs:{onSearch:t.handleSearch,onReset:t.handleReset,filters:t.filters,organizations:t.organizations,departments:t.departments}}),n("search-results-panel",{attrs:{documents:t.documents}}),n("v-row",{staticClass:"pagination-container flex-0"},[n("v-col",[n("v-pagination",{attrs:{page:t.pagination.page,length:t.pagination.pages,"total-visible":t.paginationTotalVisible},on:{input:t.handlePageChanged},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)],1)},yr=[],gr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{staticClass:"filter-row"},[n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"2"}},[n("h1",{staticClass:"headline mb-4 pl-2"},[t._v("Filters:")])]),n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"3"}},[n("v-text-field",{attrs:{label:"Query",dense:"",clearable:""},model:{value:t.filters.query,callback:function(e){t.$set(t.filters,"query",e)},expression:"filters.query"}})],1),n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"2"}},[n("v-select",{attrs:{items:t.organizations,label:"School","item-text":"title","item-value":"value",dense:""},model:{value:t.filters.organization,callback:function(e){t.$set(t.filters,"organization",e)},expression:"filters.organization"}})],1),n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"2"}},[n("v-select",{attrs:{items:t.departments,label:"Department","item-text":"title","item-value":"value",dense:""},model:{value:t.filters.department,callback:function(e){t.$set(t.filters,"department",e)},expression:"filters.department"}})],1),n("v-col",{staticClass:"filter-col",attrs:{cols:"12",xs:"12",sm:"3"}},[n("v-btn",{attrs:{color:"red",icon:"",large:""},on:{click:t.handleReset}},[n("v-icon",[t._v("mdi-close")])],1),n("v-btn",{attrs:{color:"green",icon:"",large:""},on:{click:t.handleSearch}},[n("v-icon",[t._v("mdi-magnify")])],1)],1)],1)},_r=[],Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e.prototype.handleSearch=function(){this.onSearch(this.filters)},e.prototype.handleReset=function(){this.onReset()},c["c"]([Object(k["b"])(Function)],e.prototype,"onSearch",void 0),c["c"]([Object(k["b"])(Function)],e.prototype,"onReset",void 0),c["c"]([Object(k["b"])(Array)],e.prototype,"organizations",void 0),c["c"]([Object(k["b"])(Array)],e.prototype,"departments",void 0),c["c"]([Object(k["b"])(Object)],e.prototype,"filters",void 0),e=c["c"]([Object(l["b"])({})],e),e}(r["a"]),Cr=Or,Ar=Cr,Dr=(n("aaf5"),n("b974")),wr=Object(f["a"])(Ar,gr,_r,!1,null,"181447a3",null),xr=wr.exports;h()(wr,{VBtn:Rt["a"],VCol:Fe["a"],VIcon:$t["a"],VRow:qe["a"],VSelect:Dr["a"],VTextField:Ke["a"]});var Tr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasDocuments?n("v-row",{staticClass:"mr-2 ml-2"},t._l(t.documents,(function(t,e){return n("div",{key:e,staticClass:"ma-2"},[n("document-card",{attrs:{document:t}})],1)})),0):n("v-row",[n("v-col",[n("h1",{staticClass:"text-center"},[t._v("No documents matched criteria")])])],1)},Er=[],Sr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),Object.defineProperty(e.prototype,"hasDocuments",{get:function(){return Array.isArray(this.documents)&&this.documents.length},enumerable:!0,configurable:!0}),c["c"]([Object(k["b"])(Array)],e.prototype,"documents",void 0),e=c["c"]([Object(l["b"])({components:{DocumentCard:Ie}})],e),e}(r["a"]),Nr=Sr,Ur=Nr,kr=Object(f["a"])(Ur,Tr,Er,!1,null,null,null),Pr=kr.exports;h()(kr,{VCol:Fe["a"],VRow:qe["a"]});var jr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pagination={page:1,pages:1,total:0},e.paginationTotalVisible=7,e.paginationLength=10,e.filters={query:"",organization:"",department:""},e.organizations=[],e.departments=[],e}return c["d"](e,t),e.prototype.handlePageChanged=function(t){this.fetch()},e.prototype.mounted=function(){this.urlToFilters(),this.fetch()},e.prototype.urlToFilters=function(){this.$route.query.query&&(this.filters.query=this.$route.query.query),this.$route.query.organization&&(this.filters.organization=this.$route.query.organization),this.$route.query.department&&(this.filters.department=this.$route.query.department)},e.prototype.filtersToUrl=function(){var t={};this.filters.query&&(t.query=this.filters.query),this.filters.organization&&(t.organization=this.filters.organization),this.filters.department&&(t.department=this.filters.department);var e=this.$route.query;return(e.query!==t.query||e.organization!==t.organization||e.department!==t.department)&&(this.$router.push({name:"document.search",query:t}),!0)},e.prototype.fetch=function(){return c["b"](this,void 0,void 0,(function(){var t=this;return c["e"](this,(function(e){switch(e.label){case 0:return[4,this.runWithLoading((function(){return c["b"](t,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return[4,this.searchDocuments(this.filters,c["a"]({},this.pagination,{page:(this.pagination.page||1)-1}))];case 1:return t=e.sent().pagination,t.page+=1,this.pagination=c["a"]({},this.pagination,t),[2]}}))}))}))];case 1:return e.sent(),[2]}}))}))},e.prototype.handleSearch=function(t){this.filtersToUrl(),this.fetch()},e.prototype.handleReset=function(){this.filters.query="",this.filters.organization="",this.filters.department=""},c["c"]([Object(U["c"])("documents")],e.prototype,"documents",void 0),c["c"]([Object(U["a"])(rt.SEARCH_DOCUMENTS)],e.prototype,"searchDocuments",void 0),e=c["c"]([Object(l["b"])({components:{SearchFilterPanel:xr,SearchResultsPanel:Pr}})],e),e}(Object(k["a"])(In)),Vr=jr,Ir=Vr,Rr=(n("3b79"),n("891e")),Mr=Object(f["a"])(Ir,br,yr,!1,null,"415d8614",null),Lr=Mr.exports;h()(Mr,{VCol:Fe["a"],VContainer:_e["a"],VPagination:Rr["a"],VRow:qe["a"]});var Fr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"user=purchases white pa-4 align-start",attrs:{"fill-height":"",fluid:""}},[n("v-expansion-panels",{attrs:{multiple:""},model:{value:t.panels,callback:function(e){t.panels=e},expression:"panels"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("h3",{staticClass:"font-weight-light"},[t._v("Available documents")])]),n("v-expansion-panel-content",[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Document")]),n("th",{staticClass:"text-left"},[t._v("Purchased at")]),n("th",{staticClass:"text-left"},[t._v("Valid until")]),n("th",{staticClass:"text-left"},[t._v("Download")])])]),n("tbody",[t.current.length?t._l(t.current,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.document.title))]),n("td",[t._v(t._s(e.purchased_at))]),n("td",[t._v(t._s(e.valid_until))]),n("td",[e.download_url?n("v-btn",{attrs:{href:e.download_url,icon:""}},[n("v-icon",[t._v("mdi-download")])],1):t._e()],1)])})):n("tr",[n("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("No documents loaded")])])],2)]},proxy:!0}])})],1)],1),n("v-expansion-panel",[n("v-expansion-panel-header",[n("h3",{staticClass:"font-weight-light"},[t._v("Past (expired) documents")])]),n("v-expansion-panel-content",[n("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Document")]),n("th",{staticClass:"text-left"},[t._v("Organization")]),n("th",{staticClass:"text-left"},[t._v("Purchased at")]),n("th",{staticClass:"text-left"},[t._v("Valid until")])])]),n("tbody",[t.past.length?t._l(t.past,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.document.title))]),n("td",[t._v(t._s(e.document.organization))]),n("td",[t._v(t._s(e.purchased_at))]),n("td",[t._v(t._s(e.valid_until))])])})):n("tr",[n("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("No documents loaded")])])],2)]},proxy:!0}])})],1)],1)],1)],1)},qr=[],Br=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userDocuments=null,e.panels=[0],e}return c["d"](e,t),e.prototype.mounted=function(){this.fetch()},e.prototype.fetch=function(){return c["b"](this,void 0,void 0,(function(){var t;return c["e"](this,(function(e){switch(e.label){case 0:return t=this,[4,this.getUserDocuments()];case 1:return t.userDocuments=e.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"current",{get:function(){return this.userDocuments&&this.userDocuments.current?this.userDocuments.current:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"past",{get:function(){return this.userDocuments&&this.userDocuments.past?this.userDocuments.past:[]},enumerable:!0,configurable:!0}),c["c"]([Object(U["a"])(rt.GET_USER_DOCUMENTS)],e.prototype,"getUserDocuments",void 0),e=c["c"]([Object(l["b"])({})],e),e}(Object(k["a"])(In)),Hr=Br,Gr=Hr,zr=n("cd55"),Yr=n("49e2"),Kr=n("c865"),Jr=n("0393"),Wr=n("1f4f"),Qr=Object(f["a"])(Gr,Fr,qr,!1,null,null,null),$r=Qr.exports;h()(Qr,{VBtn:Rt["a"],VContainer:_e["a"],VExpansionPanel:zr["a"],VExpansionPanelContent:Yr["a"],VExpansionPanelHeader:Kr["a"],VExpansionPanels:Jr["a"],VIcon:$t["a"],VSimpleTable:Wr["a"]});var Zr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height white list--users",attrs:{fluid:""}},[n("v-data-table",{staticClass:"elevation-1 fill-height flex-grow-1",attrs:{headers:t.headers,items:t.users},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("Users")]),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),n("v-spacer"),n("v-btn",{attrs:{small:"",outlined:"",color:"secondary",dark:""},on:{click:t.fetch}},[t._v("Refresh")]),n("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t.editUser?n("v-card-text",[n("v-container",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Name"},model:{value:t.editUser.name,callback:function(e){t.$set(t.editUser,"name",e)},expression:"editUser.name"}})],1),n("v-col",[n("v-text-field",{attrs:{type:"password",label:"Password",placeholder:"********"},model:{value:t.editUser.password,callback:function(e){t.$set(t.editUser,"password",e)},expression:"editUser.password"}})],1)],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Name"},model:{value:t.editUser.email,callback:function(e){t.$set(t.editUser,"email",e)},expression:"editUser.email"}})],1),n("v-col",[n("v-text-field",{attrs:{type:"password",label:"Password confirmation",placeholder:"********"},model:{value:t.editUser.confirmation,callback:function(e){t.$set(t.editUser,"confirmation",e)},expression:"editUser.confirmation"}})],1)],1),n("v-row",[n("v-col",[n("v-select",{attrs:{items:t.roles,label:"Role","item-text":"title","item-value":"value",dense:""},model:{value:t.editUser.role,callback:function(e){t.$set(t.editUser,"role",e)},expression:"editUser.role"}})],1),n("v-col",[n("v-switch",{attrs:{label:"Activated"},model:{value:t.editUser.active,callback:function(e){t.$set(t.editUser,"active",e)},expression:"editUser.active"}})],1)],1)],1)],1):t._e(),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Close")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.handleSave}},[t._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.activatedAt",fn:function(e){var r=e.item;return[r.active?n("span",[t._v(t._s(r.activatedAt))]):n("span",{staticClass:"red--text lighten-3"},[t._v("-- inactive --")])]}},{key:"item.actions",fn:function(e){var r=e.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.handleEdit(r)}}},[t._v(" mdi-pencil ")]),n("v-icon",{attrs:{small:""},on:{click:function(e){return t.handleDelete(r)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t._v(" Loading data... ")]},proxy:!0}])})],1)},Xr=[],ta=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pagination={page:0},e.defaultHeader={text:"",sortable:!1,filterable:!1},e.headers=[c["a"]({},e.defaultHeader,{text:"ID",value:"id"}),c["a"]({},e.defaultHeader,{text:"Email",value:"email"}),c["a"]({},e.defaultHeader,{text:"Name",value:"name"}),c["a"]({},e.defaultHeader,{text:"Activated at",value:"activatedAt"}),c["a"]({},e.defaultHeader,{text:"Role",value:"role"}),c["a"]({},e.defaultHeader,{value:"actions"})],e.dialog=!1,e.editUser=null,e}return c["d"](e,t),Object.defineProperty(e.prototype,"formTitle",{get:function(){return"Edit user"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roles",{get:function(){return[{title:"User",value:"user"},{title:"Admin",value:"admin"}]},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.fetch()},e.prototype.handleDialogChange=function(t,e){var n=this;"undefined"!==typeof e&&(t||this.$nextTick((function(){n.editUser=null})))},e.prototype.fetch=function(){this.loadUsers({})},e.prototype.handleEdit=function(t){console.log(">> User:",JSON.stringify(t)),this.editUser=c["a"]({},t),this.dialog=!0},e.prototype.handleSave=function(){return c["b"](this,void 0,void 0,(function(){var t,e=this;return c["e"](this,(function(n){switch(n.label){case 0:return t=this.editUser,t?[4,this.runWithLoading((function(){return c["b"](e,void 0,void 0,(function(){var e,n=this;return c["e"](this,(function(r){switch(r.label){case 0:return[4,this.runWithLoading((function(){return n.updateUser({user:t})}))];case 1:return e=r.sent(),e&&(this.dialog=!1,this.loadUsers({})),[2]}}))}))}))]:[2];case 1:return n.sent(),[2]}}))}))},e.prototype.handleDelete=function(t){return c["b"](this,void 0,void 0,(function(){var e=this;return c["e"](this,(function(n){switch(n.label){case 0:return confirm("Do you really want to delete user? This action cannot be reverted.")?[4,this.runWithLoading((function(){return e.deleteUser(t)}))]:[2];case 1:return n.sent(),[2]}}))}))},c["c"]([Object(U["c"])("users")],e.prototype,"users",void 0),c["c"]([Object(U["a"])(rt.ADMIN_UPDATE_USER)],e.prototype,"updateUser",void 0),c["c"]([Object(U["a"])(rt.ADMIN_DELETE_USER)],e.prototype,"deleteUser",void 0),c["c"]([Object(U["a"])(rt.ADMIN_LOAD_USERS)],e.prototype,"loadUsers",void 0),c["c"]([Object(k["c"])("dialog",{immediate:!0})],e.prototype,"handleDialogChange",null),e=c["c"]([Object(l["b"])({})],e),e}(Object(k["a"])(In)),ea=ta,na=ea,ra=n("8fea"),aa=n("b73d"),oa=n("71d9"),ia=Object(f["a"])(na,Zr,Xr,!1,null,null,null),sa=ia.exports;h()(ia,{VBtn:Rt["a"],VCard:Pe["a"],VCardActions:je["a"],VCardText:je["c"],VCardTitle:je["d"],VCol:Fe["a"],VContainer:_e["a"],VDataTable:ra["a"],VDialog:lr["a"],VDivider:Qt["a"],VIcon:$t["a"],VRow:qe["a"],VSelect:Dr["a"],VSpacer:de["a"],VSwitch:aa["a"],VTextField:Ke["a"],VToolbar:oa["a"],VToolbarTitle:pe["a"]});var ca=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height white list-documents",attrs:{fluid:""}},[n("v-data-table",{staticClass:"elevation-1 fill-height flex-grow-1",attrs:{headers:t.headers,items:t.documents},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[t._v("Documents")]),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),n("v-spacer"),n("v-btn",{attrs:{small:"",outlined:"",color:"secondary",dark:""},on:{click:t.handleCreate}},[t._v("New Item")]),n("v-btn",{attrs:{small:"",outlined:"",color:"secondary",dark:""},on:{click:t.fetch}},[t._v("Refresh")]),n("v-dialog",{attrs:{"max-width":"800px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t.currentDocument?n("v-card-text",[n("v-container",[n("v-row",[n("v-col",[t.currentDocument.id?n("v-text-field",{attrs:{disabled:"",label:"Uploaded document URL",value:t.currentDocument.url}}):n("v-file-input",{attrs:{dense:"",chips:"","show-size":"",label:"Document to upload",accept:"application/pdf"},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{dense:"",label:"Title"},model:{value:t.currentDocument.title,callback:function(e){t.$set(t.currentDocument,"title",e)},expression:"currentDocument.title"}})],1),n("v-col",{attrs:{cols:"12",sm:"6"}},[n("v-text-field",{attrs:{dense:"",label:"Organization"},model:{value:t.currentDocument.organization,callback:function(e){t.$set(t.currentDocument,"organization",e)},expression:"currentDocument.organization"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{dense:"",label:"Description"},model:{value:t.currentDocument.description,callback:function(e){t.$set(t.currentDocument,"description",e)},expression:"currentDocument.description"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{dense:"",label:"Parsed file text excerpts (about first page)",disabled:!t.currentDocument.id},model:{value:t.currentDocument.text,callback:function(e){t.$set(t.currentDocument,"text",e)},expression:"currentDocument.text"}})],1)],1)],1)],1):t._e(),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),n("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.handleSave}},[t._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var r=e.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.handleEdit(r)}}},[t._v(" mdi-pencil ")]),n("v-icon",{attrs:{small:""},on:{click:function(e){return t.handleDelete(r)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[t._v(" Loading data... ")]},proxy:!0}])})],1)},la=[],ua=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pagination={page:0},e.defaultHeader={text:"",sortable:!1,filterable:!1},e.headers=[c["a"]({},e.defaultHeader,{text:"ID",value:"id"}),c["a"]({},e.defaultHeader,{text:"Title",value:"title"}),c["a"]({},e.defaultHeader,{text:"Organization",value:"organization"}),c["a"]({},e.defaultHeader,{text:"Description",value:"description"}),c["a"]({},e.defaultHeader,{value:"actions"})],e.dialog=!1,e.file=null,e.currentDocument=null,e}return c["d"](e,t),Object.defineProperty(e.prototype,"formTitle",{get:function(){return this.currentDocument&&this.currentDocument.id?"Edit document":"Create document"},enumerable:!0,configurable:!0}),e.prototype.mounted=function(){this.fetch()},e.prototype.handleDialogChange=function(t,e){var n=this;"undefined"!==typeof e&&(t||this.$nextTick((function(){n.currentDocument=null,n.file=null})))},e.prototype.handleFileChange=function(t){this.currentDocument&&(this.currentDocument.title||(this.currentDocument.title=t.name))},e.prototype.fetch=function(){this.loadDocuments({})},e.prototype.handleEdit=function(t){this.currentDocument=t,this.dialog=!0},e.prototype.handleCreate=function(){this.handleEdit(kt())},e.prototype.handleSave=function(){return c["b"](this,void 0,void 0,(function(){var t,e=this;return c["e"](this,(function(n){switch(n.label){case 0:return t=this.currentDocument,t?[4,this.runWithLoading((function(){return c["b"](e,void 0,void 0,(function(){var e,n;return c["e"](this,(function(r){switch(r.label){case 0:return t.id?[4,this.updateDocument({document:t})]:[3,2];case 1:return n=r.sent(),[3,4];case 2:return[4,this.createDocument(c["a"]({},t,{file:this.file}))];case 3:n=r.sent(),r.label=4;case 4:return e=n,e&&(this.dialog=!1,this.loadDocuments({})),[2]}}))}))}))]:[2];case 1:return n.sent(),[2]}}))}))},e.prototype.handleDelete=function(t){return c["b"](this,void 0,void 0,(function(){var e=this;return c["e"](this,(function(n){switch(n.label){case 0:return confirm("Do you really want to delete document? This action cannot be reverted.")?[4,this.runWithLoading((function(){return e.deleteDocument(t)}))]:[2];case 1:return n.sent(),[2]}}))}))},c["c"]([Object(U["c"])("documents")],e.prototype,"documents",void 0),c["c"]([Object(U["a"])(rt.ADMIN_CREATE_DOCUMENT)],e.prototype,"createDocument",void 0),c["c"]([Object(U["a"])(rt.ADMIN_UPDATE_DOCUMENT)],e.prototype,"updateDocument",void 0),c["c"]([Object(U["a"])(rt.ADMIN_DELETE_DOCUMENT)],e.prototype,"deleteDocument",void 0),c["c"]([Object(U["a"])(rt.LOAD_DOCUMENTS)],e.prototype,"loadDocuments",void 0),c["c"]([Object(k["c"])("dialog",{immediate:!0})],e.prototype,"handleDialogChange",null),c["c"]([Object(k["c"])("file",{immediate:!0})],e.prototype,"handleFileChange",null),e=c["c"]([Object(l["b"])({})],e),e}(Object(k["a"])(In)),da=ua,pa=da,ma=n("23a7"),fa=n("a844"),va=Object(f["a"])(pa,ca,la,!1,null,null,null),ha=va.exports;h()(va,{VBtn:Rt["a"],VCard:Pe["a"],VCardActions:je["a"],VCardText:je["c"],VCardTitle:je["d"],VCol:Fe["a"],VContainer:_e["a"],VDataTable:ra["a"],VDialog:lr["a"],VDivider:Qt["a"],VFileInput:ma["a"],VIcon:$t["a"],VRow:qe["a"],VSpacer:de["a"],VTextField:Ke["a"],VTextarea:fa["a"],VToolbar:oa["a"],VToolbarTitle:pe["a"]});var ba=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",[t._v(" Not found! ")])},ya=[],ga={},_a=Object(f["a"])(ga,ba,ya,!1,null,null,null),Oa=_a.exports;h()(_a,{VContent:ue["a"]});var Ca=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"6"}},[n("v-card",{attrs:{"max-width":""}},[n("v-card-title",[n("div",{staticClass:"display-2"},[t._v("Contact")])]),n("v-card-text",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{rules:t.rules.email,label:"E-mail",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-text-field",{attrs:{rules:t.rules.subject,label:"Subject",required:""},model:{value:t.subject,callback:function(e){t.subject=e},expression:"subject"}}),n("v-textarea",{attrs:{rules:t.rules.message,label:"Message",required:""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),n("v-btn",{attrs:{type:"submit",color:"primary"}},[t._v(" Send ")])],1)],1)],1)],1)],1)},Aa=[],Da=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valid=!0,e.email="",e.subject="",e.message="",e.rules={email:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],subject:[function(t){return!!t||"Subject is required"}],message:[function(t){return!!t||"Message is required"}]},e}return c["d"](e,t),Object.defineProperty(e.prototype,"form",{get:function(){return this.$refs.form},enumerable:!0,configurable:!0}),e.prototype.handleSubmit=function(){return c["b"](this,void 0,void 0,(function(){return c["e"](this,(function(t){switch(t.label){case 0:if(!this.form.validate())return[2];this.loading(!0),t.label=1;case 1:return t.trys.push([1,,3,4]),[4,L(this.email,this.subject,this.message)];case 2:return t.sent(),[3,4];case 3:return this.loading(!1),[7];case 4:return[2]}}))}))},c["c"]([Object(U["b"])(at.LOADING)],e.prototype,"loading",void 0),c["c"]([Object(U["a"])(rt.CONTACT)],e.prototype,"contactUs",void 0),e=c["c"]([Object(l["b"])({components:{}})],e),e}(r["a"]),wa=Da,xa=wa,Ta=Object(f["a"])(xa,Ca,Aa,!1,null,null,null),Ea=Ta.exports;h()(Ta,{VBtn:Rt["a"],VCard:Pe["a"],VCardText:je["c"],VCardTitle:je["d"],VCol:Fe["a"],VForm:en["a"],VRow:qe["a"],VTextField:Ke["a"],VTextarea:fa["a"]});var Sa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12",xs:"12",md:"10"}},[n("div",{staticClass:"display-2 mb-8"},[t._v("Privacy policy")]),n("p",[t._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam sit amet purus justo. Nullam bibendum odio dignissim, tempus ante eget, maximus risus. Maecenas massa risus, suscipit et enim ac, imperdiet fringilla tortor. Duis at dapibus turpis, sed suscipit dolor. Duis nisi odio, consequat eget viverra sed, sollicitudin eu elit. Nunc ut mauris eu tellus pretium consectetur non sit amet risus. Maecenas vel nulla et dui vestibulum aliquam. ")]),n("p",[t._v(" Sed mollis arcu eu libero imperdiet suscipit. Praesent imperdiet consectetur imperdiet. Nam odio neque, faucibus sit amet eros ut, commodo aliquam purus. Vestibulum laoreet, tortor id mollis aliquet, lacus eros molestie arcu, ut lobortis ante ligula quis ex. Nulla facilisi. Fusce posuere ante nec risus ullamcorper, nec fermentum augue aliquet. Vestibulum a turpis porta, hendrerit ipsum vitae, ultrices nisi. Nam vel lectus ac nulla sagittis convallis eget quis augue. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam tortor urna, aliquet non diam et, gravida feugiat ligula. Fusce sapien justo, rutrum at iaculis at, hendrerit ac turpis. Morbi consectetur, libero et semper accumsan, enim orci feugiat libero, in sagittis dolor magna non metus. Lorem ipsum dolor sit amet, consectetur adipiscing elit. ")]),n("p",[t._v(" Nulla facilisi. Cras vitae ullamcorper nunc. Nunc congue sem sed purus volutpat sodales. Mauris in est et eros euismod bibendum. Sed nec sollicitudin libero, rutrum fermentum diam. Pellentesque placerat eros ex, sed aliquet lectus ultricies tempor. Aliquam rhoncus quam magna, a fermentum est posuere nec. ")]),n("p",[t._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce velit justo, elementum non finibus et, maximus vel justo. Nullam sit amet urna mi. In ultrices venenatis odio, quis lobortis nibh mattis sed. Morbi aliquam blandit enim, a faucibus tortor blandit vitae. Aenean at turpis nulla. Pellentesque ligula erat, tincidunt nec accumsan ut, lobortis facilisis arcu. Aliquam erat volutpat. ")]),n("p",[t._v(" Sed et ante nec dui malesuada mollis. Nullam diam libero, laoreet at molestie condimentum, pharetra non dolor. Fusce rutrum sollicitudin malesuada. Aliquam convallis lectus et ullamcorper ullamcorper. Sed at sem id leo elementum efficitur ac ut felis. Sed vitae lorem sit amet magna sodales convallis sit amet fringilla nulla. Vestibulum eu laoreet ligula. Cras mi leo, condimentum vel iaculis nec, pharetra vel enim. Praesent ac odio non purus condimentum semper vel id velit. Nulla varius nibh nec diam sagittis, vitae mattis sem tincidunt. Nam nec vestibulum leo. Integer dapibus odio diam, eu pharetra quam vestibulum ac. Duis non euismod quam, nec tristique purus. Integer sed ante non sem congue vestibulum. Fusce ligula odio, rutrum vel rutrum non, auctor ac eros. Cras malesuada elit eu erat efficitur, sed lobortis orci hendrerit. ")])])],1)},Na=[],Ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c["d"](e,t),e=c["c"]([Object(l["b"])({})],e),e}(r["a"]),ka=Ua,Pa=ka,ja=Object(f["a"])(Pa,Sa,Na,!1,null,null,null),Va=ja.exports;h()(ja,{VCol:Fe["a"],VRow:qe["a"]}),r["a"].use(Bt["a"]);var Ia={home:"home",contact:"contact",privacyPolicy:"privacy_policy",account:{login:"account.login",register:"account.register",forgotPassword:"account.forgot_password",resetPassword:"account.reset_password"},documents:{search:"document.search",document:"document.document",purchases:"document.purchases"},admin:{listUsers:"admin.list_users",listDocuments:"admin.list_documents"}},Ra=[{path:"/",redirect:"/home",component:fe,props:!0,children:[{path:"home",name:Ia.home,component:We,meta:{title:"Sailshift :: Home"}}]},{path:"/contact",name:Ia.contact,component:Ea,meta:{title:"Sailshift :: Contact us"}},{path:"/privacy_policy",name:Ia.privacyPolicy,component:Va,meta:{title:"Sailshift :: Privacy Policy"}},{path:"/account",component:Ce,children:[{path:"login",name:Ia.account.login,component:rn,meta:{title:"Sailshift :: Login"}},{path:"register",name:Ia.account.register,component:dn,meta:{title:"Sailshift :: Register"}},{path:"forgot_password",name:Ia.account.forgotPassword,component:yn,meta:{title:"Sailshift :: Forgot password"}},{path:"reset_password/:token",name:Ia.account.resetPassword,component:wn,props:!0,meta:{title:"Sailshift :: Reset password"}}]},{path:"/document",redirect:"/home",component:fe,children:[{path:"search",name:Ia.documents.search,component:Lr,props:!0,meta:{title:"Sailshift :: Search"}},{path:"purchases",name:Ia.documents.purchases,component:$r,props:!0,meta:{title:"Sailshift :: My purchases"}},{path:":documentId",name:Ia.documents.document,component:hr,props:!0,meta:{title:"Sailshift :: Document Preview"}}]},{path:"/admin",component:fe,children:[{path:"list_users",name:Ia.admin.listUsers,component:sa,props:!0,meta:{title:"Sailshift :: Users"}},{path:"list_documents",name:Ia.admin.listDocuments,component:ha,props:!0,meta:{title:"Sailshift :: Documents"}}]},{path:"*",component:Oa}],Ma={userRoutes:[Ia.documents.purchases],adminOnlyRoutes:[Ia.admin.listUsers,Ia.admin.listDocuments]},La=new Bt["a"]({mode:"history",base:"/",routes:Ra});La.beforeEach((function(t,e,n){if(Ma.adminOnlyRoutes.includes(t.name)){if(!Ut.getters.isLoggedOn||!Ut.getters.isAdmin)return n({name:Ia.account.login})}else if(Ma.userRoutes.includes(t.name)&&!Ut.getters.isLoggedOn&&t.name!==Ia.account.login)return n({name:Ia.account.login});document.title=t.meta.title,n()}));var Fa=La,qa=n("f309");n("5363"),n("d1e7");r["a"].use(qa["a"]);var Ba=new qa["a"]({icons:{iconfont:"mdi"},theme:{dark:!1}}),Ha=n("a925");n("8f4c"),n("98f5");r["a"].use(Ha["a"]);var Ga={en:{"Some string used somewhere":"Tests"},ru:{"Some string used somewhere":"ÐÐ°ÐºÐ°Ñ-ÑÐ¾ ÑÑÑÐ¾ÐºÐ° Ð¸ÑÐ¿Ð¾Ð»ÑÐ·ÑÐµÐ¼Ð°Ñ Ð³Ð´Ðµ-ÑÐ¾"}},za=new Ha["a"]({locale:"ru",fallbackLocale:"en",messages:Ga});n("d5e8"),n("953f");r["a"].config.productionTip=!1,o.a.defaults.baseURL=Object({NODE_ENV:"production",BASE_URL:"/"}).API_BASE_URL||"http://localhost:8081/",r["a"].config.errorHandler=function(t,e,n){console.error("Vue error:"),console.error("err:",t),console.error("vm:",e),console.error("info:",n)},new r["a"]({router:Fa,store:Ut,vuetify:Ba,i18n:za,render:function(t){return t(Ft)}}).$mount("#root")},d574:function(t,e,n){},edae:function(t,e,n){},fce7:function(t,e){}});
//# sourceMappingURL=app.39e12d00.js.map